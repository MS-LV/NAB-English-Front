import{f as pt,o as dt}from"./chunk-DIN32TF5.js";import"./chunk-3ZYY74ZM.js";import"./chunk-J4VPY23A.js";import"./chunk-GSKVCRVH.js";import"./chunk-7AIGY32E.js";import{a as X,b as Y}from"./chunk-Z3NAGWM3.js";import{j as Te}from"./chunk-WU43Z2PU.js";import{a as te,b as $e,c as Ke,d as Je,e as We,f as Xe,g as Ye,h as Ze,i as et,j as tt,k as it,l as at,m as ie,n as ot,o as ae,p as nt,q as oe,r as rt,s as lt,t as mt}from"./chunk-O6ZKFD36.js";import{f as ne,g as st}from"./chunk-KDC6RVS5.js";import{e as Ve,f as Z,g as ze,h as Qe,i as He,j as Ue,k as Be}from"./chunk-TVOTZ4VU.js";import{a as L,b as ee,c as j}from"./chunk-WRIK7YZC.js";import"./chunk-VIGM4TIH.js";import"./chunk-EIV6QZRO.js";import{g as Ae}from"./chunk-P2KDBDCF.js";import{c as Oe,d as Re}from"./chunk-PK5IVVJZ.js";import{a as K,b as Ge,c as J,d as Ne,g as W,h as Pe}from"./chunk-IUNWJZ3G.js";import{b as V,c as M,e as z,f as Q,g as H,i as c,j as Le,k as je,l as U,n as Fe,t as B,w as $}from"./chunk-FKZNMG4K.js";import"./chunk-RGNDWIHZ.js";import"./chunk-HQYHPCCU.js";import{a as D,b as T}from"./chunk-WJ2WTO7Q.js";import{$ as qe,Z as Ie,ba as I,ca as q}from"./chunk-IJDN24GB.js";import"./chunk-YN2XHAVH.js";import{A as ge,B as ye,Da as Me,Db as n,Ea as ke,Eb as r,Fb as p,Gb as G,H as he,Hb as N,J as _e,Jb as v,Jc as De,Mb as y,Ob as _,Tb as w,Ub as x,Vb as E,Wb as se,X as be,Xb as s,Z as Ce,Za as R,Zb as le,ab as l,bb as h,cc as we,dc as S,ec as xe,hc as Ee,i as ue,ic as Se,ka as ve,la as k,mb as u,n as O,p as ce,sb as d,t as fe,ua as f,ub as m,uc as me,va as g,zb as C}from"./chunk-AP74RX5A.js";function xt(a,t){if(a&1&&(n(0,"div",3),p(1,"img",14),r()),a&2){let e=_();l(),m("src",e.avatarUrl()||e.formAvatar().value,R)}}var F=(()=>{class a{dialogData;materialConfig;formGroup=me(()=>this.dialogData.formGroup);formAvatar=me(()=>this.formGroup().get("avatar"));avatarUrl=u("");constructor(e,i){this.dialogData=e,this.materialConfig=i}get avatarName(){return this.formAvatar()?.value?.name?this.formAvatar().value.name:""}ngOnInit(){}onInputFileChange(e){let i=e.files;if(!i?.item(0))return;let o=i.item(0);this.formAvatar().patchValue(o),this.avatarUrl.set(Oe(this.formAvatar().value))}onSubmit(){}reset(){ne(this.formGroup())}static \u0275fac=function(i){return new(i||a)(h(Ve),h(L))};static \u0275cmp=k({type:a,selectors:[["comp-create-everyday"]],standalone:!0,features:[we([]),S],decls:32,vars:11,consts:[["f_input",""],[3,"ngSubmit","formGroup"],["mat-dialog-title",""],[1,"avatar-image"],["matTooltip","Upload cover image for document","mat-icon-button","","matPrefix","","type","button",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","text","readonly","","matInput","",3,"value"],["type","file","multiple","","hidden","","accept","image/*",3,"change"],["matInput","","placeholder","Placeholder","formControlName","label"],["matInput","","rows","10","formControlName","description","placeholder","Description of question"],[3,"formGroup"],[2,"color","transparent","user-select","none"],["align","end"],["mat-raised-button","","color","warn","type","reset",3,"mat-dialog-close","disabled"],["mat-raised-button","","color","primary","type","submit",3,"mat-dialog-close","disabled"],["alt","",3,"src"]],template:function(i,o){if(i&1){let b=v();n(0,"form",1),y("ngSubmit",function(){return f(b),g(o.onSubmit())}),n(1,"h2",2),s(2,"Dictionary Question"),r(),n(3,"mat-dialog-content"),d(4,xt,2,1,"div",3),n(5,"mat-form-field")(6,"mat-label"),s(7,"Files Name"),r(),n(8,"button",4),y("click",function(){f(b);let re=se(13);return g(re.click())}),n(9,"mat-icon"),s(10,"add_photo_alternate"),r()(),p(11,"input",5),n(12,"input",6,0),y("change",function(){f(b);let re=se(13);return g(o.onInputFileChange(re))}),r(),n(14,"mat-error"),s(15,"this field is required"),r()(),n(16,"mat-form-field")(17,"mat-label"),s(18,"Label"),r(),p(19,"input",7),r(),n(20,"mat-form-field")(21,"mat-label"),s(22,"Description"),r(),p(23,"textarea",8),r(),p(24,"comp-file-dictionary",9),n(25,"p",10),s(26," Lorem ipsum dolor, sit amet consectetur adipisicing elit. Totam, nemo. Laboriosam ipsa molestiae voluptatem quasi? Id reiciendis, ut repellat consequatur sapiente voluptatibus temporibus, modi ullam quas sit, amet est consequuntur. "),r()(),n(27,"mat-dialog-actions",11)(28,"button",12),s(29," Reset "),r(),n(30,"button",13),s(31," Submit "),r()()()}i&2&&(m("formGroup",o.formGroup()),l(4),C(4,o.avatarUrl()||o.formAvatar().value?4:-1),l(4),m("matTooltipPosition",o.materialConfig.tooltip.position)("matTooltipShowDelay",o.materialConfig.tooltip.showDelay)("matTooltipHideDelay",o.materialConfig.tooltip.hideDelay),l(3),m("value",o.avatarName),l(13),m("formGroup",o.formGroup()),l(4),m("mat-dialog-close",!1)("disabled",o.formGroup().untouched),l(2),m("mat-dialog-close",o.formGroup().value)("disabled",o.formGroup().invalid))},dependencies:[Y,X,W,K,Ge,J,q,Ie,I,Te,Be,ze,Qe,Ue,He,T,D,$,Le,V,z,Q,U,Fe,pt,j,ee,dt],styles:["[_nghost-%COMP%]{display:block;width:100%}mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}form[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]{width:100%}mat-card-content[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.avatar-image[_ngcontent-%COMP%]{position:relative;width:150px;height:150px;min-height:150px;margin:10px 0}.avatar-image[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}"]})}return a})();var P=class extends Ae{data=[];paginator;sort;constructor(){super()}connect(){if(this.paginator&&this.sort)return ye(ce(this.data),this.paginator.page,this.sort.sortChange).pipe(fe(()=>this.getPagedData(this.getSortedData([...this.data]))));throw Error("Please set the paginator and sort on the data source before connecting.")}disconnect(){}getPagedData(t){if(this.paginator){let e=this.paginator.pageIndex*this.paginator.pageSize;return t.splice(e,this.paginator.pageSize)}else return t}getSortedData(t){return!this.sort?.active||this.sort.direction===""?t:t.sort((e,i)=>{let o=this.sort?.direction==="asc";switch(this.sort?.active){case"label":return yt(e.label,i.label,o);case"_id":return yt(e._id,i._id,o);default:return 0}})}};function yt(a,t,e){return!a||!t?-1:(a<t?-1:1)*(e?1:-1)}var Et=()=>[5,10,20];function St(a,t){a&1&&(n(0,"th",12),s(1," Avatar "),r())}function Dt(a,t){if(a&1&&p(0,"img",14),a&2){let e=_().$implicit;m("src",e.avatar,R)}}function Tt(a,t){if(a&1&&(n(0,"td",13),d(1,Dt,1,1,"img",14),r()),a&2){let e=t.$implicit;l(),C(1,e.avatar?1:-1)}}function It(a,t){a&1&&(n(0,"th",12),s(1," Label "),r())}function qt(a,t){if(a&1&&(n(0,"td",13),s(1),Ee(2,"titlecase"),r()),a&2){let e=t.$implicit;l(),le(" ",Se(2,1,e.label)," ")}}function Lt(a,t){a&1&&(n(0,"th",12),s(1,"Question Length"),r())}function jt(a,t){if(a&1&&(n(0,"td",13),s(1),r()),a&2){let e=t.$implicit;l(),le(" ",e.questionList.length," ")}}function Ft(a,t){a&1&&(n(0,"th",12),s(1," Update "),r())}function Gt(a,t){if(a&1){let e=v();n(0,"td",13)(1,"button",15),y("click",function(){let o=f(e).$implicit,b=_(2);return g(b.update(o._id))}),n(2,"mat-icon"),s(3,"open_in_new"),r()()()}}function Nt(a,t){a&1&&p(0,"tr",16)}function Pt(a,t){a&1&&p(0,"tr",17)}function At(a,t){a&1&&(n(0,"tr"),s(1,' class="mat-row" '),n(2,"td",18),s(3,"No data matching the filter"),r()())}function Ot(a,t){if(a&1&&(n(0,"table",1),G(1,2),d(2,St,2,0,"th",3)(3,Tt,2,1,"td",4),N(),G(4,5),d(5,It,2,0,"th",3)(6,qt,3,3,"td",4),N(),G(7,6),d(8,Lt,2,0,"th",3)(9,jt,2,1,"td",4),N(),G(10,7),d(11,Ft,2,0,"th",3)(12,Gt,4,0,"td",4),N(),d(13,Nt,1,0,"tr",8)(14,Pt,1,0,"tr",9)(15,At,4,0,"tr",10),r(),p(16,"mat-paginator",11,0)),a&2){let e=_();l(13),m("matHeaderRowDef",e.displayedColumns()),l(),m("matRowDefColumns",e.displayedColumns()),l(2),m("length",e.list().length)("pageIndex",0)("pageSize",10)("pageSizeOptions",xe(6,Et))}}var ht=class pe{materialConfig;dialog;paginator;sort;table;list=ke.required();valueChange=Me();listChange$=lt(this.list);listChange;dialogRef;formGroup=u(new H({avatar:new c(""),label:new c("",[M.required]),description:new c(""),fileName:new c(""),questionList:new B([],[M.required])}));displayedColumns=u(["avatar","label","questionList","_id"]);dataSource=u(new P);constructor(t,e){this.materialConfig=t,this.dialog=e}ngAfterViewInit(){this.tableInit(),this.onListChange()}update(t){let e=this.list().findIndex(i=>i._id===t);e!==-1&&(ne(this.formGroup()),rt(this.dialogRef),this.dialogRef=this.openDialog(this.list()[e]).subscribe(i=>{i&&(this.valueChange.emit(i),this.tableInit())}))}openDialog(t){let i={formGroup:st(t,this.formGroup())};return this.dialog.open(F,{data:i}).afterClosed()}tableInit(){this.dataSource.set(new P),this.dataSource().data=this.list(),this.dataSource().sort=this.sort,this.dataSource().paginator=this.paginator,this.table.dataSource=this.dataSource()}onListChange(){this.listChange=this.listChange$.subscribe(()=>{this.tableInit()})}static \u0275fac=function(e){return new(e||pe)(h(L),h(Z))};static \u0275cmp=k({type:pe,selectors:[["comp-everyday-table"]],viewQuery:function(e,i){if(e&1&&(w(ie,5),w(ae,5),w(te,5)),e&2){let o;x(o=E())&&(i.paginator=o.first),x(o=E())&&(i.sort=o.first),x(o=E())&&(i.table=o.first)}},inputs:{list:[ve.SignalBased,"list"]},outputs:{valueChange:"valueChange"},standalone:!0,features:[S],decls:1,vars:1,consts:[["paginator",""],["mat-table","","matSort",""],["matColumnDef","avatar"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","label"],["matColumnDef","questionList"],["matColumnDef","_id"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"matNoDataRow"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["loading","lazy","alt","",1,"avatar",3,"src"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""],["colspan","4",1,"mat-cell"]],template:function(e,i){e&1&&d(0,Ot,18,7),e&2&&C(0,i.dataSource()?0:-1)},dependencies:[at,te,Ke,Ye,Je,$e,Ze,We,Xe,et,tt,it,ot,ie,nt,ae,De,T,D,j,q,I],styles:["[_nghost-%COMP%]{display:block;width:100%}table[_ngcontent-%COMP%]{width:100%}.avatar[_ngcontent-%COMP%]{display:block;width:42px;height:42px;border-radius:50%;object-fit:cover}td[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})};ht=O([oe()],ht);var _t=[{_id:1,avatar:"assets/dictionary.png",label:"Lesson 001",description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ipsa molestiae distinctio fugiat, eaque saepe quaerat rem, corporis enim magni sequi obcaecati expedita nulla pariatur corrupti nisi in, iste doloribus iusto.",fileName:"",questionList:[{tajik:"seb",russian:"yabloko",english:"apple"},{tajik:"markaz",russian:"sentr",english:"center"},{tajik:"maydon",russian:"okrug",english:"area"}]},{_id:2,avatar:"assets/dictionary.png",label:"Lesson 002",description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ipsa molestiae distinctio fugiat, eaque saepe quaerat rem, corporis enim magni sequi obcaecati expedita nulla pariatur corrupti nisi in, iste doloribus iusto.",fileName:"",questionList:[{tajik:"seb",russian:"yabloko",english:"apple"},{tajik:"markaz",russian:"sentr",english:"center"},{tajik:"maydon",russian:"okrug",english:"area"}]},{_id:3,avatar:"assets/dictionary.png",label:"Lesson 003",description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ipsa molestiae distinctio fugiat, eaque saepe quaerat rem, corporis enim magni sequi obcaecati expedita nulla pariatur corrupti nisi in, iste doloribus iusto.",fileName:"",questionList:[{tajik:"seb",russian:"yabloko",english:"apple"},{tajik:"markaz",russian:"sentr",english:"center"},{tajik:"maydon",russian:"okrug",english:"area"}]},{_id:4,avatar:"assets/dictionary.png",label:"Lesson 004",description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ipsa molestiae distinctio fugiat, eaque saepe quaerat rem, corporis enim magni sequi obcaecati expedita nulla pariatur corrupti nisi in, iste doloribus iusto.",fileName:"",questionList:[{tajik:"seb",russian:"yabloko",english:"apple"},{tajik:"markaz",russian:"sentr",english:"center"},{tajik:"maydon",russian:"okrug",english:"area"}]},{_id:5,avatar:"assets/dictionary.png",label:"Lesson 005",description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ipsa molestiae distinctio fugiat, eaque saepe quaerat rem, corporis enim magni sequi obcaecati expedita nulla pariatur corrupti nisi in, iste doloribus iusto.",fileName:"",questionList:[{tajik:"seb",russian:"yabloko",english:"apple"},{tajik:"markaz",russian:"sentr",english:"center"},{tajik:"maydon",russian:"okrug",english:"area"}]},{_id:6,avatar:"assets/dictionary.png",label:"Lesson 006",description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ipsa molestiae distinctio fugiat, eaque saepe quaerat rem, corporis enim magni sequi obcaecati expedita nulla pariatur corrupti nisi in, iste doloribus iusto.",fileName:"",questionList:[{tajik:"seb",russian:"yabloko",english:"apple"},{tajik:"markaz",russian:"sentr",english:"center"},{tajik:"maydon",russian:"okrug",english:"area"}]},{_id:7,avatar:"assets/dictionary.png",label:"Lesson 007",description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ipsa molestiae distinctio fugiat, eaque saepe quaerat rem, corporis enim magni sequi obcaecati expedita nulla pariatur corrupti nisi in, iste doloribus iusto.",fileName:"",questionList:[{tajik:"seb",russian:"yabloko",english:"apple"},{tajik:"markaz",russian:"sentr",english:"center"},{tajik:"maydon",russian:"okrug",english:"area"}]},{_id:8,avatar:"assets/dictionary.png",label:"Lesson 008",description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ipsa molestiae distinctio fugiat, eaque saepe quaerat rem, corporis enim magni sequi obcaecati expedita nulla pariatur corrupti nisi in, iste doloribus iusto.",fileName:"",questionList:[{tajik:"seb",russian:"yabloko",english:"apple"},{tajik:"markaz",russian:"sentr",english:"center"},{tajik:"maydon",russian:"okrug",english:"area"}]},{_id:9,avatar:"assets/dictionary.png",label:"Lesson 009",description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ipsa molestiae distinctio fugiat, eaque saepe quaerat rem, corporis enim magni sequi obcaecati expedita nulla pariatur corrupti nisi in, iste doloribus iusto.",fileName:"",questionList:[{tajik:"seb",russian:"yabloko",english:"apple"},{tajik:"markaz",russian:"sentr",english:"center"},{tajik:"maydon",russian:"okrug",english:"area"}]},{_id:10,avatar:"assets/dictionary.png",label:"Lesson 010",description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ipsa molestiae distinctio fugiat, eaque saepe quaerat rem, corporis enim magni sequi obcaecati expedita nulla pariatur corrupti nisi in, iste doloribus iusto.",fileName:"",questionList:[{tajik:"seb",russian:"yabloko",english:"apple"},{tajik:"markaz",russian:"sentr",english:"center"},{tajik:"maydon",russian:"okrug",english:"area"}]},{_id:11,avatar:"assets/dictionary.png",label:"Lesson 011",description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ipsa molestiae distinctio fugiat, eaque saepe quaerat rem, corporis enim magni sequi obcaecati expedita nulla pariatur corrupti nisi in, iste doloribus iusto.",fileName:"",questionList:[{tajik:"seb",russian:"yabloko",english:"apple"},{tajik:"markaz",russian:"sentr",english:"center"},{tajik:"maydon",russian:"okrug",english:"area"}]},{_id:12,avatar:"assets/dictionary.png",label:"Lesson 012",description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ipsa molestiae distinctio fugiat, eaque saepe quaerat rem, corporis enim magni sequi obcaecati expedita nulla pariatur corrupti nisi in, iste doloribus iusto.",fileName:"",questionList:[{tajik:"seb",russian:"yabloko",english:"apple"},{tajik:"markaz",russian:"sentr",english:"center"},{tajik:"maydon",russian:"okrug",english:"area"}]}],bt={id:{header:"update",property:"_id",tooltip:"Update current document"},columns:[{header:"label",property:"label",tooltip:"Label of current document"}],avatar:{header:"Cover",property:"avatar",tooltip:"Cover of current document"},dialogComponent:F};var Rt=["searchInput"];function Vt(a,t){if(a&1){let e=v();n(0,"button",8),y("click",function(){f(e);let o=_();return g(o.searchControl().reset())}),n(1,"mat-icon"),s(2,"close"),r()()}}var Ct=class de{materialConfig;dialog;searchInput;everydayList=u(_t);searchControl=u(new c("",[M.required]));tableData=u(bt);formGroup=u(new H({avatar:new c(""),label:new c("",[M.required]),description:new c(""),fileName:new c(""),questionList:new B([],[M.required])}));destroy$=new ue;constructor(t,e){this.materialConfig=t,this.dialog=e}ngAfterViewInit(){this.onInputHandler()}onAddEveryday(){this.openDialog().pipe(_e(1)).subscribe(t=>{this.everydayList.update(e=>(e.unshift(t),e))})}onUpdateEveryday(t){if(!t._id)return;let e=t._id,i=this.everydayList().findIndex(o=>o._id===e);this.everydayList.update(o=>(o.splice(i,1,t),o))}openDialog(){let t={formGroup:this.formGroup()};return this.dialog.open(F,{data:t}).afterClosed()}onInputHandler(){let t=this.searchInput.nativeElement;ge(t,"input").pipe(he(1e3),be(this.destroy$),Ce(e=>{let i=e.target;this.searchDocument(i.value)})).subscribe()}searchDocument(t){let e=this.everydayList().filter(i=>Re(i.label,t));this.everydayList.set(e)}ngOnDestroy(){this.destroy$.next(!0)}static \u0275fac=function(e){return new(e||de)(h(L),h(Z))};static \u0275cmp=k({type:de,selectors:[["app-everyday"]],viewQuery:function(e,i){if(e&1&&w(Rt,5),e&2){let o;x(o=E())&&(i.searchInput=o.first)}},standalone:!0,features:[S],decls:16,vars:11,consts:[["searchInput",""],[1,"mat-headline-2","text-center"],[1,"example-form-field"],["matPrefix","","mat-icon-button",""],["matInput","","type","text",3,"formControl"],["matSuffix","","mat-icon-button","","aria-label","Search"],["mat-fab","","color","primary","matTooltip","Add new Document",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],[3,"valueChange","list","columns","identify","avatar","dialogComponent","formGroup"],["matPrefix","","mat-icon-button","",3,"click"]],template:function(e,i){if(e&1){let o=v();n(0,"h1",1),s(1,"Everyday Documents"),r(),n(2,"header")(3,"mat-form-field",2)(4,"mat-label"),s(5,"Search Documents"),r(),d(6,Vt,3,0,"button",3),p(7,"input",4,0),n(9,"button",5)(10,"mat-icon"),s(11,"search"),r()()(),n(12,"button",6),y("click",function(){return f(o),g(i.onAddEveryday())}),n(13,"mat-icon"),s(14,"add"),r()()(),n(15,"comp-table",7),y("valueChange",function(A){return f(o),g(i.onUpdateEveryday(A))}),r()}e&2&&(l(6),C(6,i.searchControl().value?6:-1),l(),m("formControl",i.searchControl()),l(5),m("matTooltipPosition",i.materialConfig.tooltip.position)("matTooltipShowDelay",i.materialConfig.tooltip.showDelay)("matTooltipHideDelay",i.materialConfig.tooltip.hideDelay),l(3),m("list",i.everydayList())("columns",i.tableData().columns)("identify",i.tableData().id)("avatar",i.tableData().avatar)("dialogComponent",i.tableData().dialogComponent)("formGroup",i.formGroup()))},dependencies:[$,V,z,Q,je,U,q,I,qe,T,D,Y,X,W,K,J,Ne,Pe,j,ee,mt],styles:["[_nghost-%COMP%]{flex:0 0 100vw;overflow-x:hidden}@media screen and (min-width: 960px){[_nghost-%COMP%]{flex:1 1 auto}}mat-form-field[_ngcontent-%COMP%]{flex:0 1 550px}header[_ngcontent-%COMP%]{display:flex;gap:8px}"]})};Ct=O([oe()],Ct);export{Ct as EverydayComponent};
