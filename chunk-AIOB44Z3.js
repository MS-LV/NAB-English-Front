import{a as Ee,b as Pe,c as Ae,d as ke,e as Ne,f as Ve,g as ne,h as ae,i as Rt,j as Ot,k as Qt,l as Ut,m as le,n as qe}from"./chunk-DC26EXWL.js";import{a as ee,c as ie,d as oe}from"./chunk-QQTCDX6A.js";import{a as kt,b as Nt}from"./chunk-AUGCRO4O.js";import{a as xe,b as Ie,c as Ge,d as re}from"./chunk-WKOKV735.js";import{a as Vt,b as qt,c as $t,d as Ft,e as Wt,f as vt,g as ht}from"./chunk-IRCTA5XN.js";import{a as Pt,b as At,c as Mt}from"./chunk-65OQMYDY.js";import{e as ye,f as Te,g as Se,h as Me,i as ve,j as Fe,k as be}from"./chunk-K5756VYG.js";import{c as we}from"./chunk-YSS2ZWEU.js";import{a as $}from"./chunk-QHSWDP77.js";import{a as z}from"./chunk-EDUNMAHS.js";import{b as Ct,c as te}from"./chunk-TUH4D35M.js";import{a as H,b as j}from"./chunk-L3PVCT4E.js";import{a as rt,b as nt,c as at,d as lt,e as mt,f as st,j as J}from"./chunk-ZAA7ULWK.js";import{a as X,b as k}from"./chunk-XA2PLFJU.js";import{p as De}from"./chunk-PDRW6PCR.js";import{a as W,b as Q}from"./chunk-5IJI7NAP.js";import"./chunk-GNCHM62V.js";import"./chunk-BNTI2VTZ.js";import"./chunk-QDYPK2F6.js";import{a as B,b as et,c as ft,d as Zt,g as L,h as _e}from"./chunk-HDGD2BNV.js";import{b as V,c as g,e as q,f as pt,g as K,i as G,j as dt,k as Gt,l as ct,n as ut,q as Ce,t as Et,u as R,w as O}from"./chunk-Y3NZECYS.js";import"./chunk-JGYM447R.js";import"./chunk-VBNUDUW5.js";import{$ as ge,Z,aa as St,ba as tt,ca as N}from"./chunk-GST4AJEM.js";import"./chunk-L6NNWS3K.js";import{$b as Y,Ab as o,Ba as It,Bb as a,C as it,Cb as _,Cc as he,D as wt,Gb as b,J as S,Jb as u,Lb as T,Tb as w,Ub as l,Vb as D,Wa as Jt,Wb as E,Z as ot,Za as m,_a as C,aa as Tt,ac as A,fa as Dt,jb as y,ka as xt,la as P,pb as v,rb as p,rc as M,s as bt,ta as f,ua as h,wb as F,xb as U,yb as x,zb as I}from"./chunk-VVHKCFJL.js";var ze=(n,d)=>d.title;function Ye(n,d){n&1&&(o(0,"mat-error"),l(1,"Description field is required"),a())}function Xe(n,d){n&1&&(o(0,"mat-error"),l(1,"Answer field is required"),a())}function Je(n,d){if(n&1){let t=b();o(0,"mat-radio-button",15),l(1),o(2,"button",16)(3,"mat-icon"),l(4,"more_vert"),a()()(),o(5,"mat-menu",null,1)(7,"button",17),u("click",function(){let e=f(t).$index,r=T();return h(r.removeVariant(e))}),o(8,"mat-icon"),l(9,"delete"),a(),o(10,"span"),l(11,"Remove"),a()()()}if(n&2){let t=d.$implicit,i=w(6);p("value",t),m(),E(" ",t," "),m(),p("matMenuTriggerFor",i)}}function Ze(n,d){n&1&&(o(0,"p")(1,"i"),l(2,"no variants"),a()())}function ti(n,d){n&1&&(o(0,"mat-error"),l(1,"Write new variant value for add it"),a())}function ei(n,d){if(n&1&&(o(0,"p")(1,"i"),l(2),a()()),n&2){let t=T().$implicit;m(2),D(t.title)}}function ii(n,d){if(n&1&&(o(0,"s")(1,"p")(2,"i"),l(3),a()()()),n&2){let t=T().$implicit;m(3),D(t.title)}}function oi(n,d){if(n&1&&v(0,ei,3,1,"p")(1,ii,4,1),n&2){let t=d.$implicit;F(0,t.formControl().hasError("required")?0:1)}}var zt=(()=>{class n{materialConfig;sheetData;bottomSheetRef;formGroup=M(()=>this.sheetData.formGroup);formArray=M(()=>this.formGroup().get("neither"));sumitTitle=M(()=>this.sheetData.mode==="update"?"update":"add");requiredTasks=y([{title:"* Fill description field",formControl:M(()=>this.formGroup().get("description"))},{title:"* Fill answer field",formControl:M(()=>this.formGroup().get("answer"))},{title:"* Add variants",formControl:this.formArray}]);variant=y(new G("",g.required));constructor(t,i,e){this.materialConfig=t,this.sheetData=i,this.bottomSheetRef=e}ngOnInit(){this.bottomSheetRef.disableClose=!0}addVariant(){let t=this.variant().value.toLowerCase(),i=this.formGroup().get("answer").value.toLowerCase(),r=this.formArray().value.includes(t);if(this.variant().reset(),r||!t||t===i)return;let c=new G(t);this.formArray().push(c)}close(t){this.bottomSheetRef.dismiss(!1),t.preventDefault()}submit(){this.verifyNeither(),this.bottomSheetRef.dismiss(this.formGroup())}reset(){ht(this.formGroup()),this.variant().reset()}removeVariant(t){this.formArray().removeAt(t)}verifyNeither(){let t=this.formGroup().get("answer");this.formArray().value.includes(t.value)||this.formArray().push(new G(t.value))}static \u0275fac=function(i){return new(i||n)(C($),C(ne),C(ae))};static \u0275cmp=P({type:n,selectors:[["comp-sheet-grammar"]],standalone:!0,features:[Y([]),A],decls:45,vars:27,consts:[["formDirective","ngForm"],["menu","matMenu"],[3,"ngSubmit","formGroup"],["matInput","","formControlName","description","placeholder","desciption of question",3,"formatInput"],["matInput","","formControlName","answer","placeholder","Answer of question",3,"formatInput"],[1,"mat-h3"],["id","variants"],[1,"add-variant"],["matInput","","placeholder","write new variant value",3,"formControl","formatInput"],["matTooltip","Add new variant value","mat-mini-fab","","color","primary",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay","disabled"],["matTooltip","Required tasks for adding new question",3,"matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["matTooltip","Clear new question form","mat-raised-button","","color","accent","type","reset",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["align","end"],["matTooltip","Add question to ''Question List''","mat-raised-button","","type","submit","color","primary",3,"matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay","disabled"],["matTooltip","Close ''add questions'' popup","mat-raised-button","","type","button","color","warn",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],[3,"value"],["mat-icon-button","","type","button",3,"matMenuTriggerFor"],["mat-menu-item","","type","button",3,"click"]],template:function(i,e){if(i&1){let r=b();o(0,"form",2,0),u("ngSubmit",function(){return f(r),h(e.submit())}),o(2,"mat-card")(3,"mat-card-header")(4,"mat-card-title"),l(5,"Add Questions"),a(),o(6,"mat-card-subtitle"),l(7,"Add new question for this folder"),a()(),o(8,"mat-card-content")(9,"mat-form-field")(10,"mat-label"),l(11,"Description"),a(),_(12,"input",3),v(13,Ye,2,0,"mat-error"),a(),o(14,"mat-form-field")(15,"mat-label"),l(16,"Answer"),a(),_(17,"input",4),v(18,Xe,2,0,"mat-error"),a(),o(19,"h3",5),l(20,"Question variants:"),a(),o(21,"mat-radio-group",6),x(22,Je,12,3,null,null,U,!1,Ze,3,0,"p"),a(),o(25,"div",7)(26,"mat-form-field")(27,"mat-label"),l(28,"New Variant"),a(),_(29,"input",8),v(30,ti,2,0,"mat-error"),a(),o(31,"button",9),u("click",function(){return f(r),h(e.addVariant())}),o(32,"mat-icon"),l(33,"add"),a()()(),o(34,"mat-list",10),x(35,oi,2,1,null,null,ze),a()(),o(37,"mat-card-actions")(38,"button",11),u("click",function(){return f(r),h(e.reset())}),l(39," Reset "),a()()(),o(40,"mat-nav-list",12)(41,"button",13),l(42),a(),o(43,"button",14),u("click",function(c){return f(r),h(e.close(c))}),l(44," Close "),a()()()}i&2&&(p("formGroup",e.formGroup()),m(12),p("formatInput",e.formGroup().get("description")),m(),F(13,e.formGroup().get("description").hasError("required")?13:-1),m(4),p("formatInput",e.formGroup().get("answer")),m(),F(18,e.formGroup().get("answer").hasError("required")?18:-1),m(4),I(e.formArray().value),m(7),p("formControl",e.variant())("formatInput",e.variant()),m(),F(30,e.variant().hasError("required")?30:-1),m(),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay)("disabled",e.variant().invalid),m(3),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(),I(e.requiredTasks()),m(3),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(3),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay)("disabled",e.formGroup().invalid),m(),E(" ",e.sumitTitle()," "),m(),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay))},dependencies:[j,H,L,B,et,N,Z,tt,St,J,rt,mt,at,st,lt,nt,k,X,Mt,Pt,At,oe,ee,ie,Q,W,re,Ie,xe,Ge,O,dt,V,q,pt,Gt,ct,ut,le],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.add-variant[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center}.add-variant[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{flex:1 0 50%}mat-radio-group[_ngcontent-%COMP%]     .mdc-label{display:flex;align-items:center}mat-nav-list[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:8px}"]})}return n})();var me=(()=>{class n{fb;constructor(t){this.fb=t}excelFormGroup(t){return qt(t).pipe(S(1),bt(i=>{let e=["description","answer"],r=this.formatGrammar(Vt(i,e)),s=[];return r.forEach(c=>{!c.neither||!c.answer||s.push(this.fb.group({description:[c.description,[g.required]],answer:[c.answer,[g.required]],neither:this.fb.array([c.answer,...c.neither],[g.required])}))}),s}))}formatGrammar(t){for(let i of t)i.answer=Ct(i.answer),i.description=Ct(i.description),i.neither=$t(i.neither);return t}static \u0275fac=function(i){return new(i||n)(Dt(R))};static \u0275prov=Tt({token:n,factory:n.\u0275fac})}return n})();function ni(n,d){if(n&1&&(o(0,"mat-radio-button",9),l(1),a()),n&2){let t=d.$implicit;p("value",t),m(),D(t)}}function ai(n,d){if(n&1){let t=b();o(0,"form",1)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-subtitle"),l(4),a(),o(5,"mat-card-title"),l(6),a()(),o(7,"mat-card-content")(8,"mat-radio-group",8),x(9,ni,2,2,"mat-radio-button",9,U),a()(),_(11,"mat-divider"),o(12,"mat-card-actions")(13,"button",10),u("click",function(){let e=f(t).$index,r=T();return h(r.updateQuestion(e))}),o(14,"mat-icon"),l(15,"update"),a()(),o(16,"button",11),u("click",function(){let e=f(t).$index,r=T();return h(r.removeQuestion(e))}),o(17,"mat-icon"),l(18,"delete"),a()()()()()}if(n&2){let t,i=d.$implicit,e=d.$index,r=T();p("formGroup",i),m(4),E("$",e+1,"."),m(2),D((t=i.get("description"))==null?null:t.value),m(3),I(r.getNeitherField(i)),m(4),p("matTooltipPosition",r.materialConfig.tooltip.position)("matTooltipShowDelay",r.materialConfig.tooltip.showDelay)("matTooltipHideDelay",r.materialConfig.tooltip.hideDelay),m(3),p("matTooltipPosition",r.materialConfig.tooltip.position)("matTooltipShowDelay",r.materialConfig.tooltip.showDelay)("matTooltipHideDelay",r.materialConfig.tooltip.hideDelay)}}function li(n,d){n&1&&_(0,"mat-spinner")}var Oe=(()=>{class n{materialConfig;service;bottomSheet;fb;formGroup=It(new K({}));formArray=M(()=>this.formGroup().get("questionList"));isFileLoading=y(!1);files=y([]);constructor(t,i,e,r){this.materialConfig=t,this.service=i,this.bottomSheet=e,this.fb=r}ngOnInit(){}getNeitherField(t){let i=t.get("neither");return i?i.value:[]}onInputFileChange(t){let i=t.files;!i||!i.length||this.readFile(i)}addQuestion(){this.openBottomSheet().pipe(S(1),it(t=>!!t),ot(t=>{this.formArray().push(t)})).subscribe()}updateQuestion(t){let i=this.formArray().get(""+t),r={formGroup:Wt(i),mode:"update"};this.openBottomSheet(r).pipe(S(1),it(s=>!!s),ot(s=>{this.updateFormControls(t,s)})).subscribe()}removeQuestion(t){this.formArray().removeAt(t)}reset(){ht(this.formGroup())}openBottomSheet(t){return t||(t={formGroup:this.fb.group({description:["",[g.required]],answer:["",[g.required]],neither:this.fb.array([],[g.required])}),mode:"add"}),this.bottomSheet.open(zt,{data:t}).afterDismissed()}updateFormControls(t,i){let e=this.formArray().get(""+t);for(let r of Object.keys(i.value)){let s=i.controls[r];e.setControl(r,vt(s))}}readFile(t){let i=[],e=[];this.cleanFiles(),this.isFileLoading.set(!0);for(let r in t)if(t[r]instanceof File){if(Ft(t[r],this.files()))continue;this.files.update(c=>[...c,t[r]]),e.push(t[r].name),i.push(this.service.excelFormGroup(t[r]))}this.setFormArray(i),this.setFilesName(e)}setFormArray(t){wt(...t).pipe(S(1)).subscribe(i=>{i.flat().forEach(r=>{this.formArray().push(r)}),this.isFileLoading.set(!1)})}setFilesName(t){let i=this.formGroup().get("fileName");i?.value?.trim()&&t.push(i.value),i?.patchValue(t.join(", "))}cleanFiles(){this.formArray().length||this.files.set([])}static \u0275fac=function(i){return new(i||n)(C($),C(me),C(Rt),C(R))};static \u0275cmp=P({type:n,selectors:[["comp-file-grammar"]],inputs:{formGroup:[xt.SignalBased,"formGroup"]},standalone:!0,features:[Y([me]),A],decls:31,vars:13,consts:[["f_input",""],[3,"formGroup"],["mat-icon-button","","matPrefix","","matTooltip","Upload grammar questions 'Excel' files",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","text","readonly","","matInput","","formControlName","fileName"],["type","file","multiple","","hidden","","accept",".xlsx",3,"change"],[1,"main-actions"],["matTooltip","Add new question","mat-mini-fab","","color","primary",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","reset","mat-raised-button","","color","accent","matTooltip","Reset Grammar form",3,"click","disabled","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["formControlName","answer"],[3,"value"],["matTooltip","Update current question","mat-icon-button","","color","warn","type","button",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["matTooltip","Remove current question","mat-icon-button","","color","warn","type","button",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"]],template:function(i,e){if(i&1){let r=b();o(0,"form",1)(1,"mat-form-field")(2,"mat-label"),l(3,"Files Name"),a(),o(4,"button",2),u("click",function(){f(r);let c=w(9);return h(c.click())}),o(5,"mat-icon"),l(6,"upload_file"),a()(),_(7,"input",3),o(8,"input",4,0),u("change",function(){f(r);let c=w(9);return h(e.onInputFileChange(c))}),a(),o(10,"mat-error"),l(11,"this field is required"),a()(),o(12,"mat-card")(13,"mat-card-header")(14,"mat-card-title"),l(15,"Question List"),a(),o(16,"mat-card-subtitle"),l(17,"Grammar addeded question list: "),o(18,"b"),l(19),a(),l(20," question"),a()(),o(21,"mat-card-content"),x(22,ai,19,9,"form",1,U),v(24,li,1,0,"mat-spinner"),a(),o(25,"mat-card-actions",5)(26,"button",6),u("click",function(){return f(r),h(e.addQuestion())}),o(27,"mat-icon"),l(28,"add"),a()(),o(29,"button",7),u("click",function(){return f(r),h(e.reset())}),l(30," Reset "),a()()()()}i&2&&(p("formGroup",e.formGroup()),m(4),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(15),D(e.formArray().controls.length),m(3),I(e.formArray().controls),m(2),F(24,e.isFileLoading()?24:-1),m(2),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(3),p("disabled",e.formGroup().untouched)("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay))},dependencies:[j,H,L,B,et,ft,N,Z,tt,St,J,rt,mt,at,st,lt,nt,k,X,Mt,Pt,At,O,dt,V,q,pt,ct,ut,Ot,Q,W,Nt,kt,Ut,Qt],styles:["mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-spinner[_ngcontent-%COMP%]{margin-left:auto!important;margin-right:auto!important}.main-actions[_ngcontent-%COMP%]{justify-content:space-between}"]})}return n})();var se=(()=>{class n{fb;constructor(t){this.fb=t}excelFormGroup(t){return qt(t).pipe(S(1),bt(i=>{let e=["description","answer"],r=this.formatReading(Vt(i,e)),s=r.map(({text:yt})=>yt).filter(Boolean).map(yt=>new G(yt,[g.required])),c=this.fb.array(s),fe=[];return r.forEach(yt=>{!yt.neither||!yt.answer||fe.push(this.fb.group({description:[yt.description,[g.required]],answer:[yt.answer,[g.required]],neither:this.fb.array([yt.answer,...yt.neither],[g.required])}))}),{formGroups:fe,readTexts:c}}))}formatReading(t){for(let i of t)i.answer=Ct(i.answer),i.description=Ct(i.description),i.neither=$t(i.neither);return t}static \u0275fac=function(i){return new(i||n)(Dt(R))};static \u0275prov=Tt({token:n,factory:n.\u0275fac})}return n})();function si(n,d){if(n&1){let t=b();o(0,"mat-form-field")(1,"mat-label"),l(2),a(),o(3,"textarea",10),l(4,`        
      `),a(),o(5,"button",11),u("click",function(){let e=f(t).$index,r=T();return h(r.removePragraph(e))}),o(6,"mat-icon"),l(7,"delete"),a()()()}if(n&2){let t=d.$implicit,i=d.$index;m(2),E("Paragraph ",i+1,""),m(),p("formControl",t)}}function pi(n,d){if(n&1&&(o(0,"mat-radio-button",13),l(1),a()),n&2){let t=d.$implicit;p("value",t),m(),D(t)}}function di(n,d){if(n&1){let t=b();o(0,"form",1)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-subtitle"),l(4),a(),o(5,"mat-card-title"),l(6),a()(),o(7,"mat-card-content")(8,"mat-radio-group",12),x(9,pi,2,2,"mat-radio-button",13,U),a()(),_(11,"mat-divider"),o(12,"mat-card-actions")(13,"button",14),u("click",function(){let e=f(t).$index,r=T();return h(r.updateQuestion(e))}),o(14,"mat-icon"),l(15,"update"),a()(),o(16,"button",15),u("click",function(){let e=f(t).$index,r=T();return h(r.removeQuestion(e))}),o(17,"mat-icon"),l(18,"delete"),a()()()()()}if(n&2){let t,i=d.$implicit,e=d.$index,r=T();p("formGroup",i),m(4),E("$",e+1,"."),m(2),D((t=i.get("description"))==null?null:t.value),m(3),I(r.getNeitherField(i)),m(4),p("matTooltipPosition",r.materialConfig.tooltip.position)("matTooltipShowDelay",r.materialConfig.tooltip.showDelay)("matTooltipHideDelay",r.materialConfig.tooltip.hideDelay),m(3),p("matTooltipPosition",r.materialConfig.tooltip.position)("matTooltipShowDelay",r.materialConfig.tooltip.showDelay)("matTooltipHideDelay",r.materialConfig.tooltip.hideDelay)}}function ci(n,d){n&1&&_(0,"mat-spinner")}var Be=(()=>{class n{materialConfig;service;bottomSheet;fb;formGroup=It(new K({}));formParagraphs=M(()=>this.formGroup().get("readText"));formArray=M(()=>this.formGroup().get("questionList"));formNewParagraph=y(new G("",[g.required]));isFileLoading=y(!1);files=y([]);constructor(t,i,e,r){this.materialConfig=t,this.service=i,this.bottomSheet=e,this.fb=r}ngOnInit(){}getNeitherField(t){let i=t.get("neither");return i?i.value:[]}onInputFileChange(t){let i=t.files;!i||!i.length||this.readFile(i)}addQuestion(){this.openBottomSheet().pipe(S(1),it(t=>!!t),ot(t=>{this.formArray().push(t)})).subscribe()}addParagraph(){let t=vt(this.formNewParagraph());this.formNewParagraph().reset(),this.formParagraphs().push(t)}updateQuestion(t){let i=this.formArray().get(""+t),r={formGroup:Wt(i),mode:"update"};this.openBottomSheet(r).pipe(S(1),it(s=>!!s),ot(s=>{this.updateFormControls(t,s)})).subscribe()}removeQuestion(t){this.formArray().removeAt(t)}removePragraph(t){this.formParagraphs().removeAt(t)}reset(){ht(this.formGroup())}openBottomSheet(t){return t||(t={formGroup:this.fb.group({description:["",[g.required]],answer:["",[g.required]],neither:this.fb.array([],[g.required])}),mode:"add"}),this.bottomSheet.open(zt,{data:t}).afterDismissed()}updateFormControls(t,i){let e=this.formArray().get(""+t);for(let r of Object.keys(i.value)){let s=i.controls[r];e.setControl(r,vt(s))}}readFile(t){let i=[],e=[];this.cleanFiles(),this.isFileLoading.set(!0);for(let r in t)if(t[r]instanceof File){if(Ft(t[r],this.files()))continue;this.files.update(c=>[...c,t[r]]),e.push(t[r].name),i.push(this.service.excelFormGroup(t[r]))}this.setFormArray(i),this.setFilesName(e)}setFormArray(t){wt(...t).pipe(S(1)).subscribe(i=>{i.forEach(e=>{e.readTexts.controls.forEach(s=>{this.formParagraphs().push(s)}),e.formGroups.forEach(s=>{this.formArray().push(s)})}),this.isFileLoading.set(!1)})}setFilesName(t){let i=this.formGroup().get("fileName");i?.value?.trim()&&t.push(i.value),i?.patchValue(t.join(", "))}cleanFiles(){this.formArray().length<1&&this.files.set([])}static \u0275fac=function(i){return new(i||n)(C($),C(se),C(Rt),C(R))};static \u0275cmp=P({type:n,selectors:[["comp-reading-grammar"]],inputs:{formGroup:[xt.SignalBased,"formGroup"]},standalone:!0,features:[Y([se]),A],decls:40,vars:15,consts:[["f_input",""],[3,"formGroup"],["matTooltip","Upload reading questions 'Excel' files","mat-icon-button","","matPrefix","",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","text","readonly","","matInput","","formControlName","fileName"],["type","file","multiple","","hidden","","accept",".xlsx",3,"change"],["matInput","","rows","5","required","","placeholder","Write new paragraph for reading",3,"formControl"],["mat-mini-fab","","matSuffix","","color","primary",3,"click","disabled"],[1,"main-actions"],["matTooltip","Add new question","mat-mini-fab","","color","primary",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","reset","mat-raised-button","","color","accent","matTooltip","Reset Grammar form",3,"click","disabled","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["matInput","","rows","5",3,"formControl"],["mat-icon-button","","matSuffix","","color","warn",3,"click"],["formControlName","answer"],[3,"value"],["matTooltip","Update current question","mat-icon-button","","color","warn","type","button",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["matTooltip","Remove current question","mat-icon-button","","color","warn","type","button",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"]],template:function(i,e){if(i&1){let r=b();o(0,"form",1)(1,"mat-form-field")(2,"mat-label"),l(3,"Files Name"),a(),o(4,"button",2),u("click",function(){f(r);let c=w(9);return h(c.click())}),o(5,"mat-icon"),l(6,"upload_file"),a()(),_(7,"input",3),o(8,"input",4,0),u("change",function(){f(r);let c=w(9);return h(e.onInputFileChange(c))}),a(),o(10,"mat-error"),l(11,"this field is required"),a()(),x(12,si,8,2,"mat-form-field",null,U),o(14,"mat-form-field")(15,"mat-label"),l(16,"Reading paragraph"),a(),_(17,"textarea",5),o(18,"button",6),u("click",function(){return f(r),h(e.addParagraph())}),o(19,"mat-icon"),l(20,"add"),a()()(),o(21,"mat-card")(22,"mat-card-header")(23,"mat-card-title"),l(24,"Question List"),a(),o(25,"mat-card-subtitle"),l(26,"Grammar addeded question list: "),o(27,"b"),l(28),a(),l(29," question"),a()(),o(30,"mat-card-content"),x(31,di,19,9,"form",1,U),v(33,ci,1,0,"mat-spinner"),a(),o(34,"mat-card-actions",7)(35,"button",8),u("click",function(){return f(r),h(e.addQuestion())}),o(36,"mat-icon"),l(37,"add"),a()(),o(38,"button",9),u("click",function(){return f(r),h(e.reset())}),l(39," Reset "),a()()()()}i&2&&(p("formGroup",e.formGroup()),m(4),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(8),I(e.formParagraphs().controls),m(5),p("formControl",e.formNewParagraph()),m(),p("disabled",e.formNewParagraph().invalid),m(10),D(e.formArray().controls.length),m(3),I(e.formArray().controls),m(2),F(33,e.isFileLoading()?33:-1),m(2),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(3),p("disabled",e.formGroup().untouched)("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay))},dependencies:[j,H,L,B,et,ft,Zt,N,Z,tt,St,J,rt,mt,at,st,lt,nt,k,X,Mt,Pt,At,O,dt,V,q,pt,Ce,Gt,ct,ut,Ot,Q,W,Nt,kt,Ut,Qt],styles:["mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-spinner[_ngcontent-%COMP%]{margin-left:auto!important;margin-right:auto!important}.main-actions[_ngcontent-%COMP%]{justify-content:space-between}"]})}return n})();function Le(n){return function(d){let t=d.value;if(t){let i=t.name.split(".")[1].toLowerCase();return n.toLowerCase()!==i.toLowerCase()?{requiredFileType:!0}:null}return null}}var pe=(()=>{class n{fb;constructor(t){this.fb=t}excelFormGroup(t){return qt(t).pipe(S(1),bt(i=>{let e=["description","answer"],r=this.formatGrammar(Vt(i,e)),s=[];return r.forEach(c=>{!c.neither||!c.answer||s.push(this.fb.group({description:[c.description,[g.required]],answer:[c.answer,[g.required]],neither:this.fb.array([c.answer,...c.neither],[g.required])}))}),s}))}formatGrammar(t){for(let i of t)i.answer=Ct(i.answer),i.description=Ct(i.description),i.neither=$t(i.neither);return t}static \u0275fac=function(i){return new(i||n)(Dt(R))};static \u0275prov=Tt({token:n,factory:n.\u0275fac})}return n})();function fi(n,d){if(n&1&&_(0,"audio",12),n&2){let t=d.$implicit;p("src",t,Jt)}}function hi(n,d){if(n&1&&x(0,fi,1,1,"audio",12,U),n&2){let t=T();I(t.audiosUrl())}}function gi(n,d){if(n&1&&(o(0,"mat-radio-button",14),l(1),a()),n&2){let t=d.$implicit;p("value",t),m(),D(t)}}function Ci(n,d){if(n&1){let t=b();o(0,"form",2)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-subtitle"),l(4),a(),o(5,"mat-card-title"),l(6),a()(),o(7,"mat-card-content")(8,"mat-radio-group",13),x(9,gi,2,2,"mat-radio-button",14,U),a()(),_(11,"mat-divider"),o(12,"mat-card-actions")(13,"button",15),u("click",function(){let e=f(t).$index,r=T();return h(r.updateQuestion(e))}),o(14,"mat-icon"),l(15,"update"),a()(),o(16,"button",16),u("click",function(){let e=f(t).$index,r=T();return h(r.removeQuestion(e))}),o(17,"mat-icon"),l(18,"delete"),a()()()()()}if(n&2){let t,i=d.$implicit,e=d.$index,r=T();p("formGroup",i),m(4),E("$",e+1,"."),m(2),D((t=i.get("description"))==null?null:t.value),m(3),I(r.getNeitherField(i)),m(4),p("matTooltipPosition",r.materialConfig.tooltip.position)("matTooltipShowDelay",r.materialConfig.tooltip.showDelay)("matTooltipHideDelay",r.materialConfig.tooltip.hideDelay),m(3),p("matTooltipPosition",r.materialConfig.tooltip.position)("matTooltipShowDelay",r.materialConfig.tooltip.showDelay)("matTooltipHideDelay",r.materialConfig.tooltip.hideDelay)}}var He=(()=>{class n{materialConfig;service;bottomSheet;fb;formGroup=It(new K({}));formAudios=M(()=>this.formGroup().get("audios"));formArray=M(()=>this.formGroup().get("questionList"));audiosUrl=y([]);isFileLoading=y(!1);files=y([]);audioFiles=y([]);constructor(t,i,e,r){this.materialConfig=t,this.service=i,this.bottomSheet=e,this.fb=r}get audioFilesName(){return this.formAudios().value.map(t=>t?.name).join(", ")}ngOnInit(){}getNeitherField(t){let i=t.get("neither");return i?i.value:[]}onInputFileChange(t){let i=t.files;!i||!i.length||this.readFile(i)}onAudioInputChange(t){let i=t.files;!i||!i.length||this.readAudioFile(i)}addQuestion(){this.openBottomSheet().pipe(S(1),it(t=>!!t),ot(t=>{this.formArray().push(t)})).subscribe()}updateQuestion(t){let i=this.formArray().get(""+t),r={formGroup:Wt(i),mode:"update"};this.openBottomSheet(r).pipe(S(1),it(s=>!!s),ot(s=>{this.updateFormControls(t,s)})).subscribe()}removeQuestion(t){this.formArray().removeAt(t)}reset(){ht(this.formGroup())}openBottomSheet(t){return t||(t={formGroup:this.fb.group({description:["",[g.required]],answer:["",[g.required]],neither:this.fb.array([],[g.required])}),mode:"add"}),this.bottomSheet.open(zt,{data:t}).afterDismissed()}updateFormControls(t,i){let e=this.formArray().get(""+t);for(let r of Object.keys(i.value)){let s=i.controls[r];e.setControl(r,vt(s))}}readFile(t){let i=[],e=[];this.cleanFiles(),this.isFileLoading.set(!0);for(let r in t)if(t[r]instanceof File){if(Ft(t[r],this.files()))continue;this.files().push(t[r]),e.push(t[r].name),i.push(this.service.excelFormGroup(t[r]))}this.setFormArray(i),this.setFilesName(e)}setFormArray(t){wt(...t).pipe(S(1)).subscribe(i=>{let e=i.flat();console.log(e),e.forEach(r=>{this.formArray().push(r)}),this.isFileLoading.set(!1)})}setFilesName(t){let i=this.formGroup().get("fileName");i?.value?.trim()&&t.push(i.value),i?.patchValue(t.join(", "))}setAudioFilesName(t){let i=this.formGroup().get("audioFileName");i?.value?.trim()&&t.push(i.value),i?.patchValue(t.join(", "))}cleanFiles(){this.formArray().length||this.files.set([])}readAudioFile(t){let i=0,e=[];for(;t.item(i);){let r=t.item(i),s=Ft(r,this.audioFiles());if(!r||s){i++;continue}e.push(r.name),this.audioFiles().push(r),this.formAudios().push(this.fb.control(r,Le("mp3"))),this.audiosUrl().push(te(r)),i++}this.setAudioFilesName(e)}static \u0275fac=function(i){return new(i||n)(C($),C(pe),C(Rt),C(R))};static \u0275cmp=P({type:n,selectors:[["comp-file-listening"]],inputs:{formGroup:[xt.SignalBased,"formGroup"]},standalone:!0,features:[Y([pe]),A],decls:42,vars:17,consts:[["audio_input",""],["f_input",""],[3,"formGroup"],["matTooltip","Upload listening audio file (.mp3)","mat-icon-button","","matPrefix","",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","text","readonly","","matInput","",3,"value"],["type","file","multiple","","hidden","","accept","audio/*",3,"change"],["matTooltip","Upload grammar questions 'Excel' files","mat-icon-button","","matPrefix","",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","text","readonly","","matInput","","formControlName","fileName"],["type","file","multiple","","hidden","","accept",".xlsx",3,"change"],[1,"main-actions"],["matTooltip","Add new question","mat-mini-fab","","color","primary",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","reset","mat-raised-button","","color","accent","matTooltip","Reset Grammar form",3,"click","disabled","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["controls","",3,"src"],["formControlName","answer"],[3,"value"],["matTooltip","Update current question","mat-icon-button","","color","warn","type","button",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["matTooltip","Remove current question","mat-icon-button","","color","warn","type","button",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"]],template:function(i,e){if(i&1){let r=b();o(0,"form",2)(1,"mat-form-field")(2,"mat-label"),l(3,"Audio Files Name"),a(),o(4,"button",3),u("click",function(){f(r);let c=w(9);return h(c.click())}),o(5,"mat-icon"),l(6,"audio_file"),a()(),_(7,"input",4),o(8,"input",5,0),u("change",function(){f(r);let c=w(9);return h(e.onAudioInputChange(c))}),a(),o(10,"mat-error"),l(11,"this field is required"),a()(),v(12,hi,2,0),o(13,"mat-form-field")(14,"mat-label"),l(15,"Files Name"),a(),o(16,"button",6),u("click",function(){f(r);let c=w(21);return h(c.click())}),o(17,"mat-icon"),l(18,"upload_file"),a()(),_(19,"input",7),o(20,"input",8,1),u("change",function(){f(r);let c=w(21);return h(e.onInputFileChange(c))}),a(),o(22,"mat-error"),l(23,"this field is required"),a()(),o(24,"mat-card")(25,"mat-card-header")(26,"mat-card-title"),l(27,"Question List"),a(),o(28,"mat-card-subtitle"),l(29,"Grammar addeded question list: "),o(30,"b"),l(31),a(),l(32," question"),a()(),o(33,"mat-card-content"),x(34,Ci,19,9,"form",2,U),a(),o(36,"mat-card-actions",9)(37,"button",10),u("click",function(){return f(r),h(e.addQuestion())}),o(38,"mat-icon"),l(39,"add"),a()(),o(40,"button",11),u("click",function(){return f(r),h(e.reset())}),l(41," Reset "),a()()()()}i&2&&(p("formGroup",e.formGroup()),m(4),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(3),p("value",e.audioFilesName),m(5),F(12,e.formAudios().controls.length>0?12:-1),m(4),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(15),D(e.formArray().controls.length),m(3),I(e.formArray().controls),m(3),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(3),p("disabled",e.formGroup().untouched)("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay))},dependencies:[j,H,L,B,et,ft,N,Z,tt,St,J,rt,mt,at,st,lt,nt,k,X,Mt,Pt,At,O,dt,V,q,pt,ct,ut,Ot,Q,W,Nt,kt],styles:["mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-spinner[_ngcontent-%COMP%]{margin-left:auto!important;margin-right:auto!important}audio[_ngcontent-%COMP%]{width:100%}audio[_ngcontent-%COMP%] + audio[_ngcontent-%COMP%]{margin-top:10px}.main-actions[_ngcontent-%COMP%]{justify-content:space-between}"]})}return n})();function _i(n,d){n&1&&(o(0,"mat-error"),l(1,"Theme field is required"),a())}function yi(n,d){n&1&&(o(0,"p")(1,"i"),l(2,"* Fill theme field"),a()())}function Ti(n,d){n&1&&(o(0,"s")(1,"p")(2,"i"),l(3,"* Fill theme field"),a()()())}var je=(()=>{class n{materialConfig;sheetData;bottomSheetRef;formControl=M(()=>this.sheetData.formControl);sumitTitle=M(()=>this.sheetData.mode==="update"?"update":"add");constructor(t,i,e){this.materialConfig=t,this.sheetData=i,this.bottomSheetRef=e}ngOnInit(){this.bottomSheetRef.disableClose=!0}close(t){this.bottomSheetRef.dismiss(!1),t.preventDefault()}submit(){this.bottomSheetRef.dismiss(this.formControl())}reset(){this.formControl().reset()}static \u0275fac=function(i){return new(i||n)(C($),C(ne),C(ae))};static \u0275cmp=P({type:n,selectors:[["comp-sheet-writing"]],standalone:!0,features:[Y([]),A],decls:23,vars:18,consts:[["matInput","","placeholder","new writing theme",3,"formControl","formatInput"],["matTooltip","Required tasks for adding new question",3,"matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["matTooltip","Clear new question form","mat-raised-button","","color","accent","type","reset",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["align","end"],["mat-raised-button","","type","submit","color","primary","matTooltip","Add question to ''Question List''",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay","disabled"],["matTooltip","Close ''add questions'' popup","mat-raised-button","","type","button","color","warn",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"]],template:function(i,e){i&1&&(o(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),l(3,"Add Theme"),a(),o(4,"mat-card-subtitle"),l(5,"Add new writing them for this folder"),a()(),o(6,"mat-card-content")(7,"mat-form-field")(8,"mat-label"),l(9,"Theme"),a(),_(10,"input",0),v(11,_i,2,0,"mat-error"),a(),o(12,"mat-list",1),v(13,yi,3,0,"p")(14,Ti,4,0),a()(),o(15,"mat-card-actions")(16,"button",2),u("click",function(){return e.reset()}),l(17," Reset "),a()()(),o(18,"mat-nav-list",3)(19,"button",4),u("click",function(){return e.submit()}),l(20),a(),o(21,"button",5),u("click",function(s){return e.close(s)}),l(22," Close "),a()()),i&2&&(m(10),p("formControl",e.formControl())("formatInput",e.formControl()),m(),F(11,e.formControl().hasError("required")?11:-1),m(),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(),F(13,e.formControl().hasError("required")?13:14),m(3),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(3),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay)("disabled",e.formControl().invalid),m(),E(" ",e.sumitTitle()," "),m(),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay))},dependencies:[j,H,L,B,et,N,Z,J,rt,mt,at,st,lt,nt,k,Mt,oe,ee,ie,Q,W,re,O,V,q,Gt,le],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}mat-nav-list[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:8px}"]})}return n})();var de=(()=>{class n{fb;constructor(t){this.fb=t}excelFormGroup(t){return qt(t).pipe(S(1),bt(i=>{let e=["theme"],r=this.formatGrammar(Vt(i,e)),s=[];return r.forEach(c=>{c.theme&&s.push(this.fb.control(c.theme,[g.required]))}),s}))}formatGrammar(t){for(let i of t)i.theme=Ct(i.theme);return t}static \u0275fac=function(i){return new(i||n)(Dt(R))};static \u0275prov=Tt({token:n,factory:n.\u0275fac})}return n})();function Mi(n,d){if(n&1){let t=b();o(0,"mat-card")(1,"mat-card-header")(2,"mat-card-subtitle"),l(3),a(),o(4,"mat-card-title"),l(5),a()(),_(6,"mat-divider"),o(7,"mat-card-actions")(8,"button",8),u("click",function(){let e=f(t).$index,r=T();return h(r.updateTheme(e))}),o(9,"mat-icon"),l(10,"update"),a()(),o(11,"button",9),u("click",function(){let e=f(t).$index,r=T();return h(r.removeTheme(e))}),o(12,"mat-icon"),l(13,"delete"),a()()()()}if(n&2){let t=d.$implicit,i=d.$index,e=T();m(3),E("$",i+1,"."),m(2),E(" ",t==null?null:t.value," "),m(3),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(3),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay)}}function vi(n,d){n&1&&_(0,"mat-spinner")}var $e=(()=>{class n{materialConfig;service;bottomSheet;fb;formGroup=It(new K({}));formArray=M(()=>this.formGroup().get("themes"));isFileLoading=y(!1);files=y([]);constructor(t,i,e,r){this.materialConfig=t,this.service=i,this.bottomSheet=e,this.fb=r}ngOnInit(){}onInputFileChange(t){let i=t.files;!i||!i.length||this.readFile(i)}addQuestion(){this.openBottomSheet().pipe(S(1),it(t=>!!t),ot(t=>{this.formArray().push(t)})).subscribe()}updateTheme(t){let i=this.formArray().get(""+t),r={formControl:vt(i),mode:"update"};this.openBottomSheet(r).pipe(S(1),it(s=>!!s),ot(s=>{this.updateFormControls(t,s)})).subscribe()}removeTheme(t){this.formArray().removeAt(t)}reset(){ht(this.formGroup())}openBottomSheet(t){return t||(t={formControl:this.fb.control("",g.required),mode:"add"}),this.bottomSheet.open(je,{data:t}).afterDismissed()}updateFormControls(t,i){this.formArray().setControl(t,vt(i))}readFile(t){let i=[],e=[];this.cleanFiles(),this.isFileLoading.set(!0);for(let r in t)if(t[r]instanceof File){if(Ft(t[r],this.files()))continue;this.files.update(c=>[...c,t[r]]),e.push(t[r].name),i.push(this.service.excelFormGroup(t[r]))}this.setFormArray(i),this.setFilesName(e)}setFormArray(t){wt(...t).pipe(S(1)).subscribe(i=>{let e=i.flat();console.log("next: ",e),e.forEach(r=>{this.formArray().push(r)}),this.isFileLoading.set(!1)})}setFilesName(t){let i=this.formGroup().get("fileName");i?.value?.trim()&&t.push(i.value),i?.patchValue(t.join(", "))}cleanFiles(){this.formArray().length||this.files.set([])}static \u0275fac=function(i){return new(i||n)(C($),C(de),C(Rt),C(R))};static \u0275cmp=P({type:n,selectors:[["comp-file-writing"]],inputs:{formGroup:[xt.SignalBased,"formGroup"]},standalone:!0,features:[Y([de]),A],decls:31,vars:13,consts:[["f_input",""],[3,"formGroup"],["matTooltip","Upload grammar questions 'Excel' files","mat-icon-button","","matPrefix","",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","text","readonly","","matInput","","formControlName","fileName"],["type","file","multiple","","hidden","","accept",".xlsx",3,"change"],[1,"main-actions"],["matTooltip","Add new question","mat-mini-fab","","color","primary",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","reset","mat-raised-button","","color","accent","matTooltip","Reset Grammar form",3,"click","disabled","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["matTooltip","Update current theme","mat-icon-button","","color","warn","type","button",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["matTooltip","Remove current theme","mat-icon-button","","color","warn","type","button",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"]],template:function(i,e){if(i&1){let r=b();o(0,"form",1)(1,"mat-form-field")(2,"mat-label"),l(3,"Files Name"),a(),o(4,"button",2),u("click",function(){f(r);let c=w(9);return h(c.click())}),o(5,"mat-icon"),l(6,"upload_file"),a()(),_(7,"input",3),o(8,"input",4,0),u("change",function(){f(r);let c=w(9);return h(e.onInputFileChange(c))}),a(),o(10,"mat-error"),l(11,"this field is required"),a()(),o(12,"mat-card")(13,"mat-card-header")(14,"mat-card-title"),l(15,"Question List"),a(),o(16,"mat-card-subtitle"),l(17," Writing addeded added themes list: "),o(18,"b"),l(19),a(),l(20," question"),a()(),o(21,"mat-card-content"),x(22,Mi,14,8,"mat-card",null,U),v(24,vi,1,0,"mat-spinner"),a(),o(25,"mat-card-actions",5)(26,"button",6),u("click",function(){return f(r),h(e.addQuestion())}),o(27,"mat-icon"),l(28,"add"),a()(),o(29,"button",7),u("click",function(){return f(r),h(e.reset())}),l(30," Reset "),a()()()()}i&2&&(p("formGroup",e.formGroup()),m(4),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(15),D(e.formArray().controls.length),m(3),I(e.formArray().controls),m(2),F(24,e.isFileLoading()?24:-1),m(2),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(3),p("disabled",e.formGroup().untouched)("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay))},dependencies:[j,H,L,B,et,ft,N,Z,tt,St,J,rt,mt,at,st,lt,nt,k,X,O,dt,V,q,pt,ct,ut,Ot,Q,W,Nt,kt,Ut,Qt],styles:["mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-spinner[_ngcontent-%COMP%]{margin-left:auto!important;margin-right:auto!important}.main-actions[_ngcontent-%COMP%]{justify-content:space-between}"]})}return n})();function We(n){return[{id:1,title:"Grammar",description:"Add grammar questions",component:Oe,inputs:{formGroup:n.get(z.GRAMMAR)}},{id:2,title:"Reading",description:"Add reading questions",component:Be,inputs:{formGroup:n.get(z.READING)}},{id:3,title:"Listening",description:"Add listening questions",component:He,inputs:{formGroup:n.get(z.LISTENING)}},{id:4,title:"Dictionary",description:"Add dictionary questions",component:qe,inputs:{formGroup:n.get(z.DICTIONARY)}},{id:5,title:"Writing",description:"Add writing questions",component:$e,inputs:{formGroup:n.get(z.WRITING)}}]}var Qe=(()=>{class n{constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Tt({token:n,factory:n.\u0275fac})}return n})();var bi=(n,d)=>d.id;function wi(n,d){if(n&1&&(o(0,"div",3),_(1,"img",14),a()),n&2){let t=T();m(),p("src",t.coverUrl(),Jt)}}function Di(n,d){}function xi(n,d){n&1&&v(0,Di,0,0,"ng-template")}function Ii(n,d){if(n&1&&(o(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),l(3),a(),o(4,"mat-panel-description"),l(5),a()(),v(6,xi,1,0,null,15),a()),n&2){let t=d.$implicit;m(3),D(t.title),m(2),E(" ",t.description," "),m(),p("ngComponentOutlet",t.component)("ngComponentOutletInputs",t.inputs)}}var Ue=(()=>{class n{dialogData;materialConfig;Activities=y(z);formGroup=M(()=>this.dialogData.formGroup);formCoverFile=M(()=>this.formGroup().get("coverFile"));activitiesExpansion=M(()=>We(this.formGroup()));coverUrl=y("");tiles=[{text:"One",cols:3,rows:1,color:"lightblue"},{text:"Two",cols:1,rows:2,color:"lightgreen"},{text:"Three",cols:1,rows:1,color:"lightpink"},{text:"Four",cols:2,rows:1,color:"#DDBDF1"}];constructor(t,i){this.dialogData=t,this.materialConfig=i}ngOnInit(){}get coverFileName(){return this.formCoverFile()?.value?.name??""}onInputFileChange(t){let i=t.files;if(!i||!i.item(0))return;let e=i.item(0);this.formCoverFile().patchValue(e),this.coverUrl.set(te(this.formCoverFile().value))}onSubmit(){console.log(this.formGroup().value)}reset(){ht(this.formGroup())}static \u0275fac=function(i){return new(i||n)(C(ye),C($))};static \u0275cmp=P({type:n,selectors:[["comp-create-testing"]],standalone:!0,features:[Y([Qe]),A],decls:36,vars:9,consts:[["f_input",""],["novalidate","",3,"ngSubmit","formGroup"],["mat-dialog-title",""],[1,"coverImage"],["matTooltip","Upload cover image for document","mat-icon-button","","matPrefix","",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","text","readonly","","matInput","",3,"value"],["type","file","multiple","","hidden","","accept","image/*",3,"change"],["matPrefix",""],["matInput","","formControlName","label","placeholder","Write label of document"],["matInput","","formControlName","description","rows","10","placeholder","Write description of document"],[2,"color","transparent","user-select","none"],["align","end"],["mat-raised-button","","color","primary","type","submit",3,"mat-dialog-close","disabled"],["mat-raised-button","","color","warn","type","reset",3,"click","disabled"],["alt","",3,"src"],[4,"ngComponentOutlet","ngComponentOutletInputs"]],template:function(i,e){if(i&1){let r=b();o(0,"form",1),u("ngSubmit",function(){return f(r),h(e.onSubmit())}),o(1,"h2",2),l(2,"Testing Questions"),a(),o(3,"mat-dialog-content"),v(4,wi,2,1,"div",3),o(5,"mat-form-field")(6,"mat-label"),l(7,"Files Name"),a(),o(8,"button",4),u("click",function(){f(r);let c=w(13);return h(c.click())}),o(9,"mat-icon"),l(10,"add_photo_alternate"),a()(),_(11,"input",5),o(12,"input",6,0),u("change",function(){f(r);let c=w(13);return h(e.onInputFileChange(c))}),a(),o(14,"mat-error"),l(15,"this field is required"),a()(),o(16,"mat-form-field")(17,"mat-icon",7),l(18,"label"),a(),o(19,"mat-label"),l(20,"Label"),a(),_(21,"input",8),a(),o(22,"mat-form-field")(23,"mat-label"),l(24,"Description"),a(),_(25,"textarea",9),a(),o(26,"mat-accordion"),x(27,Ii,7,4,"mat-expansion-panel",null,bi),a(),o(29,"p",10),l(30," Lorem ipsum dolor, sit amet consectetur adipisicing elit. Totam, nemo. Laboriosam ipsa molestiae voluptatem quasi? Id reiciendis, ut repellat consequatur sapiente voluptatibus temporibus, modi ullam quas sit, amet est consequuntur. "),a()(),o(31,"mat-dialog-actions",11)(32,"button",12),l(33,"Submit"),a(),o(34,"button",13),u("click",function(){return f(r),h(e.reset())}),l(35,"Reset"),a()()()}i&2&&(p("formGroup",e.formGroup()),m(4),F(4,e.coverUrl()&&e.formCoverFile().value?4:-1),m(4),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(3),p("value",e.coverFileName),m(16),I(e.activitiesExpansion()),m(5),p("mat-dialog-close",e.formGroup())("disabled",e.formGroup().invalid),m(2),p("disabled",e.formGroup().untouched))},dependencies:[j,H,L,B,et,ft,N,Z,tt,J,be,Se,Me,Fe,ve,k,X,O,dt,V,q,pt,ct,ut,Ve,Ne,Ee,Pe,ke,Ae,he,Q,W],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.coverImage[_ngcontent-%COMP%]{position:relative;width:150px;height:150px;min-height:150px;margin:10px 0}.coverImage[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}"]})}return n})();function Gi(n,d){if(n&1){let t=b();o(0,"button",7),u("click",function(){f(t);let e=T();return h(e.searchField().reset())}),o(1,"mat-icon"),l(2,"close"),a()()}}var Ei=[{id:1,name:"Hydrogen"},{id:2,name:"Helium"},{id:3,name:"Lithium"},{id:4,name:"Beryllium"},{id:5,name:"Boron"},{id:6,name:"Carbon"},{id:7,name:"Nitrogen"},{id:8,name:"Oxygen"},{id:9,name:"Fluorine"},{id:10,name:"Neon"},{id:11,name:"Sodium"},{id:12,name:"Magnesium"},{id:13,name:"Aluminum"},{id:14,name:"Silicon"},{id:15,name:"Phosphorus"},{id:16,name:"Sulfur"},{id:17,name:"Chlorine"},{id:18,name:"Argon"},{id:19,name:"Potassium"},{id:20,name:"Calcium"}],zn=(()=>{class n{materialConfig;dialog;historyList=y(Ei);historyColumns=y(["id","name"]);searchField=y(new G("",[g.required]));Activities=y(z);formGroup=y(new K({coverFile:new G,label:new G("",[g.required]),description:new G(""),[z.GRAMMAR]:new K({fileName:new G(""),questionList:new Et([],[g.required])}),[z.READING]:new K({readText:new Et([],g.required),fileName:new G(""),questionList:new Et([],[g.required])}),[z.LISTENING]:new K({audios:new Et([],[g.required]),fileName:new G(""),questionList:new Et([],[g.required])}),[z.DICTIONARY]:new K({fileName:new G(""),questionList:new Et([],[g.required])}),[z.WRITING]:new K({fileName:new G(""),themes:new Et([])})}));constructor(t,i){this.materialConfig=t,this.dialog=i}openDialog(){let t={formGroup:this.formGroup()};this.dialog.open(Ue,{data:t}).afterClosed().subscribe(e=>{console.log(`Dialog result: ${e}`)})}static \u0275fac=function(i){return new(i||n)(C($),C(Te))};static \u0275cmp=P({type:n,selectors:[["app-testing"]],standalone:!0,features:[A],decls:15,vars:7,consts:[[1,"mat-headline-2","text-center"],[1,"example-form-field"],["matPrefix","","mat-icon-button",""],["matInput","","type","text",3,"formControl"],["matSuffix","","mat-icon-button","","aria-label","Search"],["mat-fab","","color","primary","matTooltip","Add new Document",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],[3,"list","columns"],["matPrefix","","mat-icon-button","",3,"click"]],template:function(i,e){i&1&&(o(0,"h1",0),l(1,"Testing Documents"),a(),o(2,"header")(3,"mat-form-field",1)(4,"mat-label"),l(5,"Search Documents"),a(),v(6,Gi,3,0,"button",2),_(7,"input",3),o(8,"button",4)(9,"mat-icon"),l(10,"search"),a()()(),o(11,"button",5),u("click",function(){return e.openDialog()}),o(12,"mat-icon"),l(13,"add"),a()()(),_(14,"comp-table",6)),i&2&&(m(6),F(6,e.searchField().value?6:-1),m(),p("formControl",e.searchField()),m(4),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(3),p("list",e.historyList())("columns",e.historyColumns()))},dependencies:[De,k,X,we,N,tt,ge,Q,W,j,H,L,B,ft,Zt,_e,O,V,q,Gt],styles:["[_nghost-%COMP%]{flex:0 0 100vw;overflow-x:hidden}@media screen and (min-width: 960px){[_nghost-%COMP%]{flex:1 1 auto}}mat-form-field[_ngcontent-%COMP%]{flex:0 1 550px}header[_ngcontent-%COMP%]{display:flex;gap:8px}"]})}return n})();export{zn as TestingComponent};
