import{a as Tt}from"./chunk-BH7EUVTS.js";import{a as It}from"./chunk-JI3R6FPV.js";import{a as _t,b as vt,d as yt,e as Mt,f as xt}from"./chunk-SSLYQRHY.js";import{a as ht,b as Ft}from"./chunk-WSDEOAYZ.js";import{a as W,b as z,c as I}from"./chunk-5CC4SUG3.js";import{b as Gt}from"./chunk-7MLRNDAE.js";import{h as N}from"./chunk-EEPI5JBV.js";import{b as w}from"./chunk-A3HFD2ZB.js";import{b as Dt}from"./chunk-QMC2GGUA.js";import"./chunk-L4VVBDDS.js";import{a as K}from"./chunk-FDFBILGX.js";import{a as d}from"./chunk-YCVZ2DKW.js";import{a as gt,b as T}from"./chunk-3RUGDQG5.js";import{a as ft,g as Ct}from"./chunk-JJGNKWU3.js";import{b as ct,e as $,f as y,j as V,l as M,m as ut,n as dt,o as j,x}from"./chunk-B6A23TUE.js";import"./chunk-RGNDWIHZ.js";import{b as pt}from"./chunk-ZITBM2SP.js";import{a as B,b as st,c as q,f as lt,j as F}from"./chunk-MDARTJMG.js";import{ca as D}from"./chunk-DZWWLC2F.js";import"./chunk-ATQ6OJSW.js";import{Ab as p,Bc as h,Cb as it,Ea as _,Fb as A,Gb as v,Hb as f,Ib as C,Jb as m,Kb as a,Lb as c,Ub as G,Zd as mt,_a as b,aa as Z,bb as n,dc as s,ec as S,fc as L,ga as J,gc as k,ic as rt,jc as u,ka as g,la as l,nb as H,nc as nt,pc as at,vb as R,wb as tt,xb as et,yb as ot}from"./chunk-E25BKHHC.js";var Lt=(t,r)=>r.description;function kt(t,r){if(t&1&&(m(0,"mat-radio-button",5),s(1),a()),t&2){let e=r.$implicit,o=G().$implicit;it("correct",o.answer===e),p("value",e),n(),L(" ",e," ")}}function Bt(t,r){if(t&1&&(m(0,"mat-card",2)(1,"mat-card-header")(2,"mat-card-title"),s(3),a()(),m(4,"mat-card-content")(5,"mat-radio-group",3),f(6,kt,2,4,"mat-radio-button",4,v),a()()()),t&2){let e=r.$implicit,o=r.$index;p("formGroupName",o),n(3),k("",o+1,". ",e.description,""),n(2),p("color",e.userAnswer===e.answer?"primary":"warn"),n(),C(e.neither)}}var O=(()=>{class t{formGroup=_.required();questionList=h(()=>this.formGroup().get("questionList"));ngOnInit(){}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=l({type:t,selectors:[["comp-variants-form"]],inputs:{formGroup:[g.SignalBased,"formGroup"]},standalone:!0,features:[u],decls:4,vars:1,consts:[[3,"formGroup"],["formArrayName","questionList"],[3,"formGroupName"],["formControlName","userAnswer",3,"color"],[3,"value","correct"],[3,"value"]],template:function(o,i){o&1&&(m(0,"form",0)(1,"div",1),f(2,Bt,8,4,"mat-card",2,Lt),a()()),o&2&&(p("formGroup",i.formGroup()),n(2),C(i.questionList().value))},dependencies:[x,V,$,y,M,j,ut,dt,T,D,w,I,W,z,F,B,q,lt,st],styles:["mat-radio-button[_ngcontent-%COMP%]{display:block}.correct[_ngcontent-%COMP%]{background-color:var(--success-color)}"]})}return t})();var Rt=(()=>{class t{formGroup=_.required();ngOnInit(){}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=l({type:t,selectors:[["comp-grammar-result"]],inputs:{formGroup:[g.SignalBased,"formGroup"]},standalone:!0,features:[u],decls:1,vars:1,consts:[[3,"formGroup"]],template:function(o,i){o&1&&c(0,"comp-variants-form",0),o&2&&p("formGroup",i.formGroup())},dependencies:[T,D,w,I,F,x,y,M,Dt,Gt,O]})}return t})();function qt(t,r){if(t&1&&(m(0,"p",0),s(1),a()),t&2){let e=r.$implicit;n(),S(e)}}var St=(()=>{class t{formGroup=_.required();readTexts=h(()=>this.formGroup().get("readTexts").value);ngOnInit(){}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=l({type:t,selectors:[["comp-reading-result"]],inputs:{formGroup:[g.SignalBased,"formGroup"]},standalone:!0,features:[u],decls:3,vars:1,consts:[[1,"mat-body-1"],[3,"formGroup"]],template:function(o,i){o&1&&(f(0,qt,2,1,"p",0,v),c(2,"comp-variants-form",1)),o&2&&(C(i.readTexts()),n(2),p("formGroup",i.formGroup()))},dependencies:[T,D,w,I,F,x,y,M,O],styles:["p[_ngcontent-%COMP%]{text-align:justify;text-indent:32px}"]})}return t})();function $t(t,r){if(t&1&&(m(0,"mat-card")(1,"mat-card-content"),c(2,"audio",3,0),a()()),t&2){let e=r.$implicit;n(2),p("src",e,b)}}function Vt(t,r){t&1&&(m(0,"p",1),s(1,"No Audio File"),a())}var Nt=(()=>{class t{formGroup=_.required();audios=h(()=>this.formGroup().get("audios").value);ngOnInit(){}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=l({type:t,selectors:[["comp-listening-result"]],inputs:{formGroup:[g.SignalBased,"formGroup"]},standalone:!0,features:[u],decls:4,vars:2,consts:[["audio",""],[1,"mat-body-1"],[3,"formGroup"],["data-repeated","0","controls","",3,"src"]],template:function(o,i){o&1&&(f(0,$t,4,1,"mat-card",null,v,!1,Vt,2,0,"p",1),c(3,"comp-variants-form",2)),o&2&&(C(i.audios()),n(3),p("formGroup",i.formGroup()))},dependencies:[F,B,q,x,y,M,O],styles:["audio[_ngcontent-%COMP%]{display:block;width:100%}mat-card[_ngcontent-%COMP%] + mat-card[_ngcontent-%COMP%]{margin-top:8px}mat-card[_ngcontent-%COMP%]:last-of-type{margin-bottom:10px}"]})}return t})();function jt(t,r){if(t&1&&(m(0,"mat-radio-button",3),s(1),a()),t&2){let e=r.$implicit;p("value",e),n(),L(" ",e," ")}}function Wt(t,r){t&1&&s(0," List of themes empty ")}var wt=(()=>{class t{formGroup=_.required();themes=h(()=>this.formGroup().get("themes").value);ngOnInit(){}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=l({type:t,selectors:[["comp-writing-result"]],inputs:{formGroup:[g.SignalBased,"formGroup"]},standalone:!0,features:[u],decls:11,vars:2,consts:[[3,"formGroup"],[1,"mat-h3"],["formControlName","theme","inert",""],["color","primary",3,"value"],["matInput","","formControlName","assay","rows","10"]],template:function(o,i){o&1&&(m(0,"form",0)(1,"h3",1),s(2,"Choosed theme for assay:"),a(),m(3,"mat-radio-group",2),f(4,jt,2,2,"mat-radio-button",3,v,!1,Wt,1,0),a(),m(7,"mat-form-field")(8,"mat-label"),s(9,"Assay text..."),a(),c(10,"textarea",4),a()()),o&2&&(p("formGroup",i.formGroup()),n(4),C(i.themes()))},dependencies:[T,gt,Ct,ft,D,I,W,z,x,V,ct,$,y,M,j]})}return t})();function Et(t){return[{title:"Writing",component:wt,inputs:{formGroup:N(t[d.WRITING])}},{title:"Dictionary",component:Tt,inputs:{formGroup:N(t[d.DICTIONARY])}},{title:"Grammar",component:Rt,inputs:{formGroup:N(t[d.GRAMMAR])}},{title:"Reading",component:St,inputs:{formGroup:N(t[d.READING])}},{title:"Listening",component:Nt,inputs:{formGroup:N(t[d.LISTENING])}}]}var Q=(()=>{class t{constructor(){}checkHistory(e){let o={total:0,answered:0},i=Object.values(d),Ot=[d.GRAMMAR,d.READING,d.LISTENING],At=[d.DICTIONARY];for(let P in e){if(i.indexOf(P)===-1)continue;let Y=e[P];if(!Y?.questionList)continue;let X=Y.questionList;if(o.total+=X.length,Ot.indexOf(P)!==-1&&this.checkGrammar(X,o),At.indexOf(P)!==-1){let Pt=Y.questionList;this.checkDictionary(Pt,o)}}return o}checkGrammar(e,o){return e.forEach(i=>{K(i.answer,i.userAnswer)&&(o.answered+=1)}),o}checkDictionary(e,o){return e.forEach(i=>{K(i.userAnswer,i.english)&&(o.answered+=1)}),o}static \u0275fac=function(o){return new(o||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac})}return t})();var zt=()=>[import("./chunk-QILZVKYT.js").then(t=>t.NgComponentOutlet)];function Ut(t,r){if(t&1&&c(0,"img",0),t&2){let e=G(2);p("src",e.historyData().avatar,b)}}function Yt(t,r){if(t&1&&(m(0,"div",3),c(1,"mat-progress-spinner",4),m(2,"h1",5),s(3),nt(4,"percent"),a()(),m(5,"h1",6),s(6),a()),t&2){let e=G(2);n(),p("value",e.score().answered/e.score().total*100),n(2),S(at(4,4,e.score().answered/e.score().total,"2.0-0")),n(3),k("",e.score().answered," / ",e.score().total,"")}}function Jt(t,r){if(t&1&&(m(0,"p",1),s(1),a()),t&2){let e,o=G(2);n(),S((e=o.historyData())==null?null:e.description)}}function Kt(t,r){}function Qt(t,r){t&1&&R(0,Kt,0,0,"ng-template")}function Xt(t,r){if(t&1&&R(0,Qt,1,0,null,7),t&2){let e=G().$implicit;p("ngComponentOutlet",e.component)("ngComponentOutletInputs",e.inputs)}}function Zt(t,r){t&1&&(m(0,"h1",8),s(1,"Loading..."),a())}function te(t,r){if(t&1&&(m(0,"mat-expansion-panel",2)(1,"mat-expansion-panel-header")(2,"mat-panel-title"),s(3),a()(),R(4,Xt,1,2)(5,Zt,2,0),tt(6,4,zt,null,5),et(5e3),ot(0,-1),a()),t&2){let e=r.$implicit,o=r.$index;p("expanded",o===0),n(3),S(e.title)}}function ee(t,r){if(t&1&&(R(0,Ut,1,1,"img",0)(1,Yt,7,7)(2,Jt,2,1,"p",1),m(3,"mat-accordion"),f(4,te,8,2,"mat-expansion-panel",2,v),a()),t&2){let e,o,i=G();A(0,(e=i.historyData())!=null&&e.avatar?0:-1),n(),A(1,i.score()?1:-1),n(),A(2,(o=i.historyData())!=null&&o.description?2:-1),n(2),C(i.resultActivities())}}var vo=(()=>{class t{historyData=H(null);resultActivities=H([]);score=H(null);route=J(pt);service=J(Q);ngAfterViewInit(){this.loadHistory(),this.calcScore()}getHistory(e){return It.find(o=>o._id==e)}loadHistory(){let e=this.route.snapshot.paramMap.get("id");this.historyData.set(this.getHistory(e)),this.historyData()&&this.resultActivities.set(Et(this.historyData()))}calcScore(){if(!this.historyData())return;let e=this.service.checkHistory(this.historyData());this.score.set(e)}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=l({type:t,selectors:[["app-history-testing-detail"]],standalone:!0,features:[rt([Q]),u],decls:1,vars:1,consts:[["alt","",1,"avatar",3,"src"],[1,"mat-body-1"],[3,"expanded"],[1,"score"],["color","primary","mode","determinate",3,"value"],[1,"mat-h1"],[1,"mat-headline-1","text-center"],[4,"ngComponentOutlet","ngComponentOutletInputs"],[1,"mat-display-1"]],template:function(o,i){o&1&&R(0,ee,6,3,"mat-accordion"),o&2&&A(0,i.historyData()?0:-1)},dependencies:[mt,Ft,ht,xt,Mt,_t,vt,yt],styles:["[_nghost-%COMP%]{flex:0 0 100vw;overflow-x:hidden}@media screen and (min-width: 960px){[_nghost-%COMP%]{flex:1 1 auto}}.avatar[_ngcontent-%COMP%]{display:block;width:200px;height:200px;border-radius:50%;object-fit:cover;margin:0 auto}.score[_ngcontent-%COMP%]{position:relative;height:150px}.score[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;translate:-50% -50%}"]})}return t})();export{vo as HistoryTestingDetailComponent};
