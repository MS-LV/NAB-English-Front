import{a as Ee,b as Pe,c as Ae,d as ke,e as Ne,f as Ve,g as re,h as ne,i as qt,j as Rt,k as $t,l as Wt,m as ae,n as qe}from"./chunk-7SNASH5Q.js";import{a as O}from"./chunk-I2WXVCCR.js";import{a as te,c as ee,d as ie}from"./chunk-KCIWCTZC.js";import{a as xe,b as Ge,c as Ie,d as oe}from"./chunk-3UBBKQGT.js";import{a as Nt,b as Vt,c as Ht,d as Ft,e as jt,f as vt,g as ht}from"./chunk-NVR6YKGL.js";import{a as H}from"./chunk-2V2G3VPZ.js";import{a as Et,b as Pt,c as St}from"./chunk-3QLJEPXT.js";import{e as Ce,f as _e,g as ye,h as Te,i as Se,j as ve,k as Me}from"./chunk-HWPV3RPI.js";import{b as Ct,c as Zt}from"./chunk-XRBED3Z7.js";import{a as At,b as kt}from"./chunk-OOYF4DFP.js";import{a as Fe,b as be,c as we}from"./chunk-ZIF4CVKH.js";import{a as Z,b as tt}from"./chunk-XQ7G2H5Q.js";import{a as ot,b as rt,c as nt,d as at,e as lt,f as mt,j as W}from"./chunk-V532RDTM.js";import{a as $,b as k}from"./chunk-U5LLAVCC.js";import{a as q,b as R,c as De}from"./chunk-Q2RFYGIB.js";import"./chunk-AYXFV5TJ.js";import"./chunk-L7HWUGPE.js";import"./chunk-F5IVTEMI.js";import{a as Y,b as X,c as Tt,d as ge,g as J}from"./chunk-PQIP7T7F.js";import{b as U,c as g,e as K,f as dt,g as L,i as E,j as ct,k as Lt,l as ut,n as ft,q as he,r as It,s as V,u as z}from"./chunk-MLPI2VI5.js";import"./chunk-JGYM447R.js";import"./chunk-H5HDYDQF.js";import{$ as st,Z as Q,aa as pt,ba as N}from"./chunk-KKVWT62S.js";import"./chunk-ZZWWPPFM.js";import{$b as j,Ab as r,Ba as Gt,Bb as a,Bc as fe,C as et,Cb as _,D as wt,Gb as G,J as T,Jb as u,Lb as S,Tb as F,Ub as l,Vb as b,Wa as Jt,Wb as I,Z as it,Za as m,_a as C,aa as yt,ac as A,fa as Dt,jb as y,ka as xt,la as P,pb as M,qc as v,rb as p,s as bt,ta as f,ua as h,wb as w,xb as B,yb as D,zb as x}from"./chunk-CYP4QHP4.js";var ze=(n,c)=>c.title;function Ye(n,c){n&1&&(r(0,"mat-error"),l(1,"Description field is required"),a())}function Xe(n,c){n&1&&(r(0,"mat-error"),l(1,"Answer field is required"),a())}function Je(n,c){if(n&1){let t=G();r(0,"mat-radio-button",15),l(1),r(2,"button",16)(3,"mat-icon"),l(4,"more_vert"),a()()(),r(5,"mat-menu",null,1)(7,"button",17),u("click",function(){let e=f(t).$index,o=S();return h(o.removeVariant(e))}),r(8,"mat-icon"),l(9,"delete"),a(),r(10,"span"),l(11,"Remove"),a()()()}if(n&2){let t=c.$implicit,i=F(6);p("value",t),m(),I(" ",t," "),m(),p("matMenuTriggerFor",i)}}function Ze(n,c){n&1&&(r(0,"p")(1,"i"),l(2,"no variants"),a()())}function ti(n,c){n&1&&(r(0,"mat-error"),l(1,"Write new variant value for add it"),a())}function ei(n,c){if(n&1&&(r(0,"p")(1,"i"),l(2),a()()),n&2){let t=S().$implicit;m(2),b(t.title)}}function ii(n,c){if(n&1&&(r(0,"s")(1,"p")(2,"i"),l(3),a()()()),n&2){let t=S().$implicit;m(3),b(t.title)}}function oi(n,c){if(n&1&&M(0,ei,3,1,"p")(1,ii,4,1),n&2){let t=c.$implicit;w(0,t.formControl().hasError("required")?0:1)}}var zt=(()=>{class n{materialConfig;sheetData;bottomSheetRef;formGroup=v(()=>this.sheetData.formGroup);formArray=v(()=>this.formGroup().get("neither"));sumitTitle=v(()=>this.sheetData.mode==="update"?"update":"add");requiredTasks=y([{title:"* Fill description field",formControl:v(()=>this.formGroup().get("description"))},{title:"* Fill answer field",formControl:v(()=>this.formGroup().get("answer"))},{title:"* Add variants",formControl:this.formArray}]);variant=y(new E("",g.required));constructor(t,i,e){this.materialConfig=t,this.sheetData=i,this.bottomSheetRef=e}ngOnInit(){this.bottomSheetRef.disableClose=!0}addVariant(){let t=this.variant().value.toLowerCase(),i=this.formGroup().get("answer").value.toLowerCase(),o=this.formArray().value.includes(t);if(this.variant().reset(),o||!t||t===i)return;let d=new E(t);this.formArray().push(d)}close(t){this.bottomSheetRef.dismiss(!1),t.preventDefault()}submit(){this.verifyNeither(),this.bottomSheetRef.dismiss(this.formGroup())}reset(){ht(this.formGroup()),this.variant().reset()}removeVariant(t){this.formArray().removeAt(t)}verifyNeither(){let t=this.formGroup().get("answer");this.formArray().value.includes(t.value)||this.formArray().push(new E(t.value))}static \u0275fac=function(i){return new(i||n)(C(O),C(re),C(ne))};static \u0275cmp=P({type:n,selectors:[["comp-sheet-grammar"]],standalone:!0,features:[j([]),A],decls:45,vars:27,consts:[["formDirective","ngForm"],["menu","matMenu"],[3,"ngSubmit","formGroup"],["matInput","","formControlName","description","placeholder","desciption of question",3,"formatInput"],["matInput","","formControlName","answer","placeholder","Answer of question",3,"formatInput"],[1,"mat-h3"],["id","variants"],[1,"add-variant"],["matInput","","placeholder","write new variant value",3,"formControl","formatInput"],["matTooltip","Add new variant value","mat-mini-fab","","color","primary",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay","disabled"],["matTooltip","Required tasks for adding new question",3,"matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["matTooltip","Clear new question form","mat-raised-button","","color","accent","type","reset",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["align","end"],["matTooltip","Add question to ''Question List''","mat-raised-button","","type","submit","color","primary",3,"matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay","disabled"],["matTooltip","Close ''add questions'' popup","mat-raised-button","","type","button","color","warn",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],[3,"value"],["mat-icon-button","","type","button",3,"matMenuTriggerFor"],["mat-menu-item","","type","button",3,"click"]],template:function(i,e){if(i&1){let o=G();r(0,"form",2,0),u("ngSubmit",function(){return f(o),h(e.submit())}),r(2,"mat-card")(3,"mat-card-header")(4,"mat-card-title"),l(5,"Add Questions"),a(),r(6,"mat-card-subtitle"),l(7,"Add new question for this folder"),a()(),r(8,"mat-card-content")(9,"mat-form-field")(10,"mat-label"),l(11,"Description"),a(),_(12,"input",3),M(13,Ye,2,0,"mat-error"),a(),r(14,"mat-form-field")(15,"mat-label"),l(16,"Answer"),a(),_(17,"input",4),M(18,Xe,2,0,"mat-error"),a(),r(19,"h3",5),l(20,"Question variants:"),a(),r(21,"mat-radio-group",6),D(22,Je,12,3,null,null,B,!1,Ze,3,0,"p"),a(),r(25,"div",7)(26,"mat-form-field")(27,"mat-label"),l(28,"New Variant"),a(),_(29,"input",8),M(30,ti,2,0,"mat-error"),a(),r(31,"button",9),u("click",function(){return f(o),h(e.addVariant())}),r(32,"mat-icon"),l(33,"add"),a()()(),r(34,"mat-list",10),D(35,oi,2,1,null,null,ze),a()(),r(37,"mat-card-actions")(38,"button",11),u("click",function(){return f(o),h(e.reset())}),l(39," Reset "),a()()(),r(40,"mat-nav-list",12)(41,"button",13),l(42),a(),r(43,"button",14),u("click",function(d){return f(o),h(e.close(d))}),l(44," Close "),a()()()}i&2&&(p("formGroup",e.formGroup()),m(12),p("formatInput",e.formGroup().get("description")),m(),w(13,e.formGroup().get("description").hasError("required")?13:-1),m(4),p("formatInput",e.formGroup().get("answer")),m(),w(18,e.formGroup().get("answer").hasError("required")?18:-1),m(4),x(e.formArray().value),m(7),p("formControl",e.variant())("formatInput",e.variant()),m(),w(30,e.variant().hasError("required")?30:-1),m(),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay)("disabled",e.variant().invalid),m(3),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(),x(e.requiredTasks()),m(3),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(3),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay)("disabled",e.formGroup().invalid),m(),I(" ",e.sumitTitle()," "),m(),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay))},dependencies:[tt,Z,J,Y,X,N,Q,pt,st,W,ot,lt,nt,mt,at,rt,k,$,St,Et,Pt,ie,te,ee,R,q,oe,Ge,xe,Ie,z,ct,U,K,dt,Lt,ut,ft,ae],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.add-variant[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center}.add-variant[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{flex:1 0 50%}mat-radio-group[_ngcontent-%COMP%]     .mdc-label{display:flex;align-items:center}mat-nav-list[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:8px}"]})}return n})();var le=(()=>{class n{fb;constructor(t){this.fb=t}excelFormGroup(t){return Vt(t).pipe(T(1),bt(i=>{let e=["description","answer"],o=this.formatGrammar(Nt(i,e)),s=[];return o.forEach(d=>{!d.neither||!d.answer||s.push(this.fb.group({description:[d.description,[g.required]],answer:[d.answer,[g.required]],neither:this.fb.array([d.answer,...d.neither],[g.required])}))}),s}))}formatGrammar(t){for(let i of t)i.answer=Ct(i.answer),i.description=Ct(i.description),i.neither=Ht(i.neither);return t}static \u0275fac=function(i){return new(i||n)(Dt(V))};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})();function ni(n,c){if(n&1&&(r(0,"mat-radio-button",9),l(1),a()),n&2){let t=c.$implicit;p("value",t),m(),b(t)}}function ai(n,c){if(n&1){let t=G();r(0,"form",1)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-subtitle"),l(4),a(),r(5,"mat-card-title"),l(6),a()(),r(7,"mat-card-content")(8,"mat-radio-group",8),D(9,ni,2,2,"mat-radio-button",9,B),a()(),_(11,"mat-divider"),r(12,"mat-card-actions")(13,"button",10),u("click",function(){let e=f(t).$index,o=S();return h(o.updateQuestion(e))}),r(14,"mat-icon"),l(15,"update"),a()(),r(16,"button",11),u("click",function(){let e=f(t).$index,o=S();return h(o.removeQuestion(e))}),r(17,"mat-icon"),l(18,"delete"),a()()()()()}if(n&2){let t,i=c.$implicit,e=c.$index,o=S();p("formGroup",i),m(4),I("$",e+1,"."),m(2),b((t=i.get("description"))==null?null:t.value),m(3),x(o.getNeitherField(i)),m(4),p("matTooltipPosition",o.materialConfig.tooltip.position)("matTooltipShowDelay",o.materialConfig.tooltip.showDelay)("matTooltipHideDelay",o.materialConfig.tooltip.hideDelay),m(3),p("matTooltipPosition",o.materialConfig.tooltip.position)("matTooltipShowDelay",o.materialConfig.tooltip.showDelay)("matTooltipHideDelay",o.materialConfig.tooltip.hideDelay)}}function li(n,c){n&1&&_(0,"mat-spinner")}var Oe=(()=>{class n{materialConfig;service;bottomSheet;fb;formGroup=Gt(new L({}));formArray=v(()=>this.formGroup().get("questionList"));isFileLoading=y(!1);files=y([]);constructor(t,i,e,o){this.materialConfig=t,this.service=i,this.bottomSheet=e,this.fb=o}ngOnInit(){}getNeitherField(t){let i=t.get("neither");return i?i.value:[]}onInputFileChange(t){let i=t.files;!i||!i.length||this.readFile(i)}addQuestion(){this.openBottomSheet().pipe(T(1),et(t=>!!t),it(t=>{this.formArray().push(t)})).subscribe()}updateQuestion(t){let i=this.formArray().get(""+t),o={formGroup:jt(i),mode:"update"};this.openBottomSheet(o).pipe(T(1),et(s=>!!s),it(s=>{this.updateFormControls(t,s)})).subscribe()}removeQuestion(t){this.formArray().removeAt(t)}reset(){ht(this.formGroup())}openBottomSheet(t){return t||(t={formGroup:this.fb.group({description:["",[g.required]],answer:["",[g.required]],neither:this.fb.array([],[g.required])}),mode:"add"}),this.bottomSheet.open(zt,{data:t}).afterDismissed()}updateFormControls(t,i){let e=this.formArray().get(""+t);for(let o of Object.keys(i.value)){let s=i.controls[o];e.setControl(o,vt(s))}}readFile(t){let i=[],e=[];this.cleanFiles(),this.isFileLoading.set(!0);for(let o in t)if(t[o]instanceof File){if(Ft(t[o],this.files()))continue;this.files.update(d=>[...d,t[o]]),e.push(t[o].name),i.push(this.service.excelFormGroup(t[o]))}this.setFormArray(i),this.setFilesName(e)}setFormArray(t){wt(...t).pipe(T(1)).subscribe(i=>{i.flat().forEach(o=>{this.formArray().push(o)}),this.isFileLoading.set(!1)})}setFilesName(t){let i=this.formGroup().get("fileName");i?.value?.trim()&&t.push(i.value),i?.patchValue(t.join(", "))}cleanFiles(){this.formArray().length||this.files.set([])}static \u0275fac=function(i){return new(i||n)(C(O),C(le),C(qt),C(V))};static \u0275cmp=P({type:n,selectors:[["comp-file-grammar"]],inputs:{formGroup:[xt.SignalBased,"formGroup"]},standalone:!0,features:[j([le]),A],decls:31,vars:13,consts:[["f_input",""],[3,"formGroup"],["mat-icon-button","","matPrefix","","matTooltip","Upload grammar questions 'Excel' files",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","text","readonly","","matInput","","formControlName","fileName"],["type","file","multiple","","hidden","","accept",".xlsx",3,"change"],[1,"main-actions"],["matTooltip","Add new question","mat-mini-fab","","color","primary",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","reset","mat-raised-button","","color","accent","matTooltip","Reset Grammar form",3,"click","disabled","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["formControlName","answer"],[3,"value"],["matTooltip","Update current question","mat-icon-button","","color","warn","type","button",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["matTooltip","Remove current question","mat-icon-button","","color","warn","type","button",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"]],template:function(i,e){if(i&1){let o=G();r(0,"form",1)(1,"mat-form-field")(2,"mat-label"),l(3,"Files Name"),a(),r(4,"button",2),u("click",function(){f(o);let d=F(9);return h(d.click())}),r(5,"mat-icon"),l(6,"upload_file"),a()(),_(7,"input",3),r(8,"input",4,0),u("change",function(){f(o);let d=F(9);return h(e.onInputFileChange(d))}),a(),r(10,"mat-error"),l(11,"this field is required"),a()(),r(12,"mat-card")(13,"mat-card-header")(14,"mat-card-title"),l(15,"Question List"),a(),r(16,"mat-card-subtitle"),l(17,"Grammar addeded question list: "),r(18,"b"),l(19),a(),l(20," question"),a()(),r(21,"mat-card-content"),D(22,ai,19,9,"form",1,B),M(24,li,1,0,"mat-spinner"),a(),r(25,"mat-card-actions",5)(26,"button",6),u("click",function(){return f(o),h(e.addQuestion())}),r(27,"mat-icon"),l(28,"add"),a()(),r(29,"button",7),u("click",function(){return f(o),h(e.reset())}),l(30," Reset "),a()()()()}i&2&&(p("formGroup",e.formGroup()),m(4),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(15),b(e.formArray().controls.length),m(3),x(e.formArray().controls),m(2),w(24,e.isFileLoading()?24:-1),m(2),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(3),p("disabled",e.formGroup().untouched)("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay))},dependencies:[tt,Z,J,Y,X,Tt,N,Q,pt,st,W,ot,lt,nt,mt,at,rt,k,$,St,Et,Pt,z,ct,U,K,dt,ut,ft,Rt,R,q,kt,At,Wt,$t],styles:["mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-spinner[_ngcontent-%COMP%]{margin-left:auto!important;margin-right:auto!important}.main-actions[_ngcontent-%COMP%]{justify-content:space-between}"]})}return n})();var me=(()=>{class n{fb;constructor(t){this.fb=t}excelFormGroup(t){return Vt(t).pipe(T(1),bt(i=>{let e=["description","answer"],o=this.formatReading(Nt(i,e)),s=o.map(({text:_t})=>_t).filter(Boolean).map(_t=>new E(_t,[g.required])),d=this.fb.array(s),ue=[];return o.forEach(_t=>{!_t.neither||!_t.answer||ue.push(this.fb.group({description:[_t.description,[g.required]],answer:[_t.answer,[g.required]],neither:this.fb.array([_t.answer,..._t.neither],[g.required])}))}),{formGroups:ue,readTexts:d}}))}formatReading(t){for(let i of t)i.answer=Ct(i.answer),i.description=Ct(i.description),i.neither=Ht(i.neither);return t}static \u0275fac=function(i){return new(i||n)(Dt(V))};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})();function si(n,c){if(n&1){let t=G();r(0,"mat-form-field")(1,"mat-label"),l(2),a(),r(3,"textarea",10),l(4,`        
      `),a(),r(5,"button",11),u("click",function(){let e=f(t).$index,o=S();return h(o.removePragraph(e))}),r(6,"mat-icon"),l(7,"delete"),a()()()}if(n&2){let t=c.$implicit,i=c.$index;m(2),I("Paragraph ",i+1,""),m(),p("formControl",t)}}function pi(n,c){if(n&1&&(r(0,"mat-radio-button",13),l(1),a()),n&2){let t=c.$implicit;p("value",t),m(),b(t)}}function di(n,c){if(n&1){let t=G();r(0,"form",1)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-subtitle"),l(4),a(),r(5,"mat-card-title"),l(6),a()(),r(7,"mat-card-content")(8,"mat-radio-group",12),D(9,pi,2,2,"mat-radio-button",13,B),a()(),_(11,"mat-divider"),r(12,"mat-card-actions")(13,"button",14),u("click",function(){let e=f(t).$index,o=S();return h(o.updateQuestion(e))}),r(14,"mat-icon"),l(15,"update"),a()(),r(16,"button",15),u("click",function(){let e=f(t).$index,o=S();return h(o.removeQuestion(e))}),r(17,"mat-icon"),l(18,"delete"),a()()()()()}if(n&2){let t,i=c.$implicit,e=c.$index,o=S();p("formGroup",i),m(4),I("$",e+1,"."),m(2),b((t=i.get("description"))==null?null:t.value),m(3),x(o.getNeitherField(i)),m(4),p("matTooltipPosition",o.materialConfig.tooltip.position)("matTooltipShowDelay",o.materialConfig.tooltip.showDelay)("matTooltipHideDelay",o.materialConfig.tooltip.hideDelay),m(3),p("matTooltipPosition",o.materialConfig.tooltip.position)("matTooltipShowDelay",o.materialConfig.tooltip.showDelay)("matTooltipHideDelay",o.materialConfig.tooltip.hideDelay)}}function ci(n,c){n&1&&_(0,"mat-spinner")}var Be=(()=>{class n{materialConfig;service;bottomSheet;fb;formGroup=Gt(new L({}));formParagraphs=v(()=>this.formGroup().get("readText"));formArray=v(()=>this.formGroup().get("questionList"));formNewParagraph=y(new E("",[g.required]));isFileLoading=y(!1);files=y([]);constructor(t,i,e,o){this.materialConfig=t,this.service=i,this.bottomSheet=e,this.fb=o}ngOnInit(){}getNeitherField(t){let i=t.get("neither");return i?i.value:[]}onInputFileChange(t){let i=t.files;!i||!i.length||this.readFile(i)}addQuestion(){this.openBottomSheet().pipe(T(1),et(t=>!!t),it(t=>{this.formArray().push(t)})).subscribe()}addParagraph(){let t=vt(this.formNewParagraph());this.formNewParagraph().reset(),this.formParagraphs().push(t)}updateQuestion(t){let i=this.formArray().get(""+t),o={formGroup:jt(i),mode:"update"};this.openBottomSheet(o).pipe(T(1),et(s=>!!s),it(s=>{this.updateFormControls(t,s)})).subscribe()}removeQuestion(t){this.formArray().removeAt(t)}removePragraph(t){this.formParagraphs().removeAt(t)}reset(){ht(this.formGroup())}openBottomSheet(t){return t||(t={formGroup:this.fb.group({description:["",[g.required]],answer:["",[g.required]],neither:this.fb.array([],[g.required])}),mode:"add"}),this.bottomSheet.open(zt,{data:t}).afterDismissed()}updateFormControls(t,i){let e=this.formArray().get(""+t);for(let o of Object.keys(i.value)){let s=i.controls[o];e.setControl(o,vt(s))}}readFile(t){let i=[],e=[];this.cleanFiles(),this.isFileLoading.set(!0);for(let o in t)if(t[o]instanceof File){if(Ft(t[o],this.files()))continue;this.files.update(d=>[...d,t[o]]),e.push(t[o].name),i.push(this.service.excelFormGroup(t[o]))}this.setFormArray(i),this.setFilesName(e)}setFormArray(t){wt(...t).pipe(T(1)).subscribe(i=>{i.forEach(e=>{e.readTexts.controls.forEach(s=>{this.formParagraphs().push(s)}),e.formGroups.forEach(s=>{this.formArray().push(s)})}),this.isFileLoading.set(!1)})}setFilesName(t){let i=this.formGroup().get("fileName");i?.value?.trim()&&t.push(i.value),i?.patchValue(t.join(", "))}cleanFiles(){this.formArray().length<1&&this.files.set([])}static \u0275fac=function(i){return new(i||n)(C(O),C(me),C(qt),C(V))};static \u0275cmp=P({type:n,selectors:[["comp-reading-grammar"]],inputs:{formGroup:[xt.SignalBased,"formGroup"]},standalone:!0,features:[j([me]),A],decls:40,vars:15,consts:[["f_input",""],[3,"formGroup"],["matTooltip","Upload reading questions 'Excel' files","mat-icon-button","","matPrefix","",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","text","readonly","","matInput","","formControlName","fileName"],["type","file","multiple","","hidden","","accept",".xlsx",3,"change"],["matInput","","rows","5","required","","placeholder","Write new paragraph for reading",3,"formControl"],["mat-mini-fab","","matSuffix","","color","primary",3,"click","disabled"],[1,"main-actions"],["matTooltip","Add new question","mat-mini-fab","","color","primary",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","reset","mat-raised-button","","color","accent","matTooltip","Reset Grammar form",3,"click","disabled","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["matInput","","rows","5",3,"formControl"],["mat-icon-button","","matSuffix","","color","warn",3,"click"],["formControlName","answer"],[3,"value"],["matTooltip","Update current question","mat-icon-button","","color","warn","type","button",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["matTooltip","Remove current question","mat-icon-button","","color","warn","type","button",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"]],template:function(i,e){if(i&1){let o=G();r(0,"form",1)(1,"mat-form-field")(2,"mat-label"),l(3,"Files Name"),a(),r(4,"button",2),u("click",function(){f(o);let d=F(9);return h(d.click())}),r(5,"mat-icon"),l(6,"upload_file"),a()(),_(7,"input",3),r(8,"input",4,0),u("change",function(){f(o);let d=F(9);return h(e.onInputFileChange(d))}),a(),r(10,"mat-error"),l(11,"this field is required"),a()(),D(12,si,8,2,"mat-form-field",null,B),r(14,"mat-form-field")(15,"mat-label"),l(16,"Reading paragraph"),a(),_(17,"textarea",5),r(18,"button",6),u("click",function(){return f(o),h(e.addParagraph())}),r(19,"mat-icon"),l(20,"add"),a()()(),r(21,"mat-card")(22,"mat-card-header")(23,"mat-card-title"),l(24,"Question List"),a(),r(25,"mat-card-subtitle"),l(26,"Grammar addeded question list: "),r(27,"b"),l(28),a(),l(29," question"),a()(),r(30,"mat-card-content"),D(31,di,19,9,"form",1,B),M(33,ci,1,0,"mat-spinner"),a(),r(34,"mat-card-actions",7)(35,"button",8),u("click",function(){return f(o),h(e.addQuestion())}),r(36,"mat-icon"),l(37,"add"),a()(),r(38,"button",9),u("click",function(){return f(o),h(e.reset())}),l(39," Reset "),a()()()()}i&2&&(p("formGroup",e.formGroup()),m(4),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(8),x(e.formParagraphs().controls),m(5),p("formControl",e.formNewParagraph()),m(),p("disabled",e.formNewParagraph().invalid),m(10),b(e.formArray().controls.length),m(3),x(e.formArray().controls),m(2),w(33,e.isFileLoading()?33:-1),m(2),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(3),p("disabled",e.formGroup().untouched)("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay))},dependencies:[tt,Z,J,Y,X,Tt,ge,N,Q,pt,st,W,ot,lt,nt,mt,at,rt,k,$,St,Et,Pt,z,ct,U,K,dt,he,Lt,ut,ft,Rt,R,q,kt,At,Wt,$t],styles:["mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-spinner[_ngcontent-%COMP%]{margin-left:auto!important;margin-right:auto!important}.main-actions[_ngcontent-%COMP%]{justify-content:space-between}"]})}return n})();function Le(n){return function(c){let t=c.value;if(t){let i=t.name.split(".")[1].toLowerCase();return n.toLowerCase()!==i.toLowerCase()?{requiredFileType:!0}:null}return null}}var se=(()=>{class n{fb;constructor(t){this.fb=t}excelFormGroup(t){return Vt(t).pipe(T(1),bt(i=>{let e=["description","answer"],o=this.formatGrammar(Nt(i,e)),s=[];return o.forEach(d=>{!d.neither||!d.answer||s.push(this.fb.group({description:[d.description,[g.required]],answer:[d.answer,[g.required]],neither:this.fb.array([d.answer,...d.neither],[g.required])}))}),s}))}formatGrammar(t){for(let i of t)i.answer=Ct(i.answer),i.description=Ct(i.description),i.neither=Ht(i.neither);return t}static \u0275fac=function(i){return new(i||n)(Dt(V))};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})();function fi(n,c){if(n&1&&_(0,"audio",12),n&2){let t=c.$implicit;p("src",t,Jt)}}function hi(n,c){if(n&1&&D(0,fi,1,1,"audio",12,B),n&2){let t=S();x(t.audiosUrl())}}function gi(n,c){if(n&1&&(r(0,"mat-radio-button",14),l(1),a()),n&2){let t=c.$implicit;p("value",t),m(),b(t)}}function Ci(n,c){if(n&1){let t=G();r(0,"form",2)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-subtitle"),l(4),a(),r(5,"mat-card-title"),l(6),a()(),r(7,"mat-card-content")(8,"mat-radio-group",13),D(9,gi,2,2,"mat-radio-button",14,B),a()(),_(11,"mat-divider"),r(12,"mat-card-actions")(13,"button",15),u("click",function(){let e=f(t).$index,o=S();return h(o.updateQuestion(e))}),r(14,"mat-icon"),l(15,"update"),a()(),r(16,"button",16),u("click",function(){let e=f(t).$index,o=S();return h(o.removeQuestion(e))}),r(17,"mat-icon"),l(18,"delete"),a()()()()()}if(n&2){let t,i=c.$implicit,e=c.$index,o=S();p("formGroup",i),m(4),I("$",e+1,"."),m(2),b((t=i.get("description"))==null?null:t.value),m(3),x(o.getNeitherField(i)),m(4),p("matTooltipPosition",o.materialConfig.tooltip.position)("matTooltipShowDelay",o.materialConfig.tooltip.showDelay)("matTooltipHideDelay",o.materialConfig.tooltip.hideDelay),m(3),p("matTooltipPosition",o.materialConfig.tooltip.position)("matTooltipShowDelay",o.materialConfig.tooltip.showDelay)("matTooltipHideDelay",o.materialConfig.tooltip.hideDelay)}}var He=(()=>{class n{materialConfig;service;bottomSheet;fb;formGroup=Gt(new L({}));formAudios=v(()=>this.formGroup().get("audios"));formArray=v(()=>this.formGroup().get("questionList"));audiosUrl=y([]);isFileLoading=y(!1);files=y([]);audioFiles=y([]);constructor(t,i,e,o){this.materialConfig=t,this.service=i,this.bottomSheet=e,this.fb=o}get audioFilesName(){return this.formAudios().value.map(t=>t?.name).join(", ")}ngOnInit(){}getNeitherField(t){let i=t.get("neither");return i?i.value:[]}onInputFileChange(t){let i=t.files;!i||!i.length||this.readFile(i)}onAudioInputChange(t){let i=t.files;!i||!i.length||this.readAudioFile(i)}addQuestion(){this.openBottomSheet().pipe(T(1),et(t=>!!t),it(t=>{this.formArray().push(t)})).subscribe()}updateQuestion(t){let i=this.formArray().get(""+t),o={formGroup:jt(i),mode:"update"};this.openBottomSheet(o).pipe(T(1),et(s=>!!s),it(s=>{this.updateFormControls(t,s)})).subscribe()}removeQuestion(t){this.formArray().removeAt(t)}reset(){ht(this.formGroup())}openBottomSheet(t){return t||(t={formGroup:this.fb.group({description:["",[g.required]],answer:["",[g.required]],neither:this.fb.array([],[g.required])}),mode:"add"}),this.bottomSheet.open(zt,{data:t}).afterDismissed()}updateFormControls(t,i){let e=this.formArray().get(""+t);for(let o of Object.keys(i.value)){let s=i.controls[o];e.setControl(o,vt(s))}}readFile(t){let i=[],e=[];this.cleanFiles(),this.isFileLoading.set(!0);for(let o in t)if(t[o]instanceof File){if(Ft(t[o],this.files()))continue;this.files().push(t[o]),e.push(t[o].name),i.push(this.service.excelFormGroup(t[o]))}this.setFormArray(i),this.setFilesName(e)}setFormArray(t){wt(...t).pipe(T(1)).subscribe(i=>{let e=i.flat();console.log(e),e.forEach(o=>{this.formArray().push(o)}),this.isFileLoading.set(!1)})}setFilesName(t){let i=this.formGroup().get("fileName");i?.value?.trim()&&t.push(i.value),i?.patchValue(t.join(", "))}setAudioFilesName(t){let i=this.formGroup().get("audioFileName");i?.value?.trim()&&t.push(i.value),i?.patchValue(t.join(", "))}cleanFiles(){this.formArray().length||this.files.set([])}readAudioFile(t){let i=0,e=[];for(;t.item(i);){let o=t.item(i),s=Ft(o,this.audioFiles());if(!o||s){i++;continue}e.push(o.name),this.audioFiles().push(o),this.formAudios().push(this.fb.control(o,Le("mp3"))),this.audiosUrl().push(Zt(o)),i++}this.setAudioFilesName(e)}static \u0275fac=function(i){return new(i||n)(C(O),C(se),C(qt),C(V))};static \u0275cmp=P({type:n,selectors:[["comp-file-listening"]],inputs:{formGroup:[xt.SignalBased,"formGroup"]},standalone:!0,features:[j([se]),A],decls:42,vars:17,consts:[["audio_input",""],["f_input",""],[3,"formGroup"],["matTooltip","Upload listening audio file (.mp3)","mat-icon-button","","matPrefix","",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","text","readonly","","matInput","",3,"value"],["type","file","multiple","","hidden","","accept","audio/*",3,"change"],["matTooltip","Upload grammar questions 'Excel' files","mat-icon-button","","matPrefix","",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","text","readonly","","matInput","","formControlName","fileName"],["type","file","multiple","","hidden","","accept",".xlsx",3,"change"],[1,"main-actions"],["matTooltip","Add new question","mat-mini-fab","","color","primary",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","reset","mat-raised-button","","color","accent","matTooltip","Reset Grammar form",3,"click","disabled","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["controls","",3,"src"],["formControlName","answer"],[3,"value"],["matTooltip","Update current question","mat-icon-button","","color","warn","type","button",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["matTooltip","Remove current question","mat-icon-button","","color","warn","type","button",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"]],template:function(i,e){if(i&1){let o=G();r(0,"form",2)(1,"mat-form-field")(2,"mat-label"),l(3,"Audio Files Name"),a(),r(4,"button",3),u("click",function(){f(o);let d=F(9);return h(d.click())}),r(5,"mat-icon"),l(6,"audio_file"),a()(),_(7,"input",4),r(8,"input",5,0),u("change",function(){f(o);let d=F(9);return h(e.onAudioInputChange(d))}),a(),r(10,"mat-error"),l(11,"this field is required"),a()(),M(12,hi,2,0),r(13,"mat-form-field")(14,"mat-label"),l(15,"Files Name"),a(),r(16,"button",6),u("click",function(){f(o);let d=F(21);return h(d.click())}),r(17,"mat-icon"),l(18,"upload_file"),a()(),_(19,"input",7),r(20,"input",8,1),u("change",function(){f(o);let d=F(21);return h(e.onInputFileChange(d))}),a(),r(22,"mat-error"),l(23,"this field is required"),a()(),r(24,"mat-card")(25,"mat-card-header")(26,"mat-card-title"),l(27,"Question List"),a(),r(28,"mat-card-subtitle"),l(29,"Grammar addeded question list: "),r(30,"b"),l(31),a(),l(32," question"),a()(),r(33,"mat-card-content"),D(34,Ci,19,9,"form",2,B),a(),r(36,"mat-card-actions",9)(37,"button",10),u("click",function(){return f(o),h(e.addQuestion())}),r(38,"mat-icon"),l(39,"add"),a()(),r(40,"button",11),u("click",function(){return f(o),h(e.reset())}),l(41," Reset "),a()()()()}i&2&&(p("formGroup",e.formGroup()),m(4),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(3),p("value",e.audioFilesName),m(5),w(12,e.formAudios().controls.length>0?12:-1),m(4),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(15),b(e.formArray().controls.length),m(3),x(e.formArray().controls),m(3),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(3),p("disabled",e.formGroup().untouched)("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay))},dependencies:[tt,Z,J,Y,X,Tt,N,Q,pt,st,W,ot,lt,nt,mt,at,rt,k,$,St,Et,Pt,z,ct,U,K,dt,ut,ft,Rt,R,q,kt,At],styles:["mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-spinner[_ngcontent-%COMP%]{margin-left:auto!important;margin-right:auto!important}audio[_ngcontent-%COMP%]{width:100%}audio[_ngcontent-%COMP%] + audio[_ngcontent-%COMP%]{margin-top:10px}.main-actions[_ngcontent-%COMP%]{justify-content:space-between}"]})}return n})();function _i(n,c){n&1&&(r(0,"mat-error"),l(1,"Theme field is required"),a())}function yi(n,c){n&1&&(r(0,"p")(1,"i"),l(2,"* Fill theme field"),a()())}function Ti(n,c){n&1&&(r(0,"s")(1,"p")(2,"i"),l(3,"* Fill theme field"),a()()())}var je=(()=>{class n{materialConfig;sheetData;bottomSheetRef;formControl=v(()=>this.sheetData.formControl);sumitTitle=v(()=>this.sheetData.mode==="update"?"update":"add");constructor(t,i,e){this.materialConfig=t,this.sheetData=i,this.bottomSheetRef=e}ngOnInit(){this.bottomSheetRef.disableClose=!0}close(t){this.bottomSheetRef.dismiss(!1),t.preventDefault()}submit(){this.bottomSheetRef.dismiss(this.formControl())}reset(){this.formControl().reset()}static \u0275fac=function(i){return new(i||n)(C(O),C(re),C(ne))};static \u0275cmp=P({type:n,selectors:[["comp-sheet-writing"]],standalone:!0,features:[j([]),A],decls:23,vars:18,consts:[["matInput","","placeholder","new writing theme",3,"formControl","formatInput"],["matTooltip","Required tasks for adding new question",3,"matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["matTooltip","Clear new question form","mat-raised-button","","color","accent","type","reset",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["align","end"],["mat-raised-button","","type","submit","color","primary","matTooltip","Add question to ''Question List''",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay","disabled"],["matTooltip","Close ''add questions'' popup","mat-raised-button","","type","button","color","warn",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"]],template:function(i,e){i&1&&(r(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),l(3,"Add Theme"),a(),r(4,"mat-card-subtitle"),l(5,"Add new writing them for this folder"),a()(),r(6,"mat-card-content")(7,"mat-form-field")(8,"mat-label"),l(9,"Theme"),a(),_(10,"input",0),M(11,_i,2,0,"mat-error"),a(),r(12,"mat-list",1),M(13,yi,3,0,"p")(14,Ti,4,0),a()(),r(15,"mat-card-actions")(16,"button",2),u("click",function(){return e.reset()}),l(17," Reset "),a()()(),r(18,"mat-nav-list",3)(19,"button",4),u("click",function(){return e.submit()}),l(20),a(),r(21,"button",5),u("click",function(s){return e.close(s)}),l(22," Close "),a()()),i&2&&(m(10),p("formControl",e.formControl())("formatInput",e.formControl()),m(),w(11,e.formControl().hasError("required")?11:-1),m(),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(),w(13,e.formControl().hasError("required")?13:14),m(3),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(3),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay)("disabled",e.formControl().invalid),m(),I(" ",e.sumitTitle()," "),m(),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay))},dependencies:[tt,Z,J,Y,X,N,Q,W,ot,lt,nt,mt,at,rt,k,St,ie,te,ee,R,q,oe,z,U,K,Lt,ae],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}mat-nav-list[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:8px}"]})}return n})();var pe=(()=>{class n{fb;constructor(t){this.fb=t}excelFormGroup(t){return Vt(t).pipe(T(1),bt(i=>{let e=["theme"],o=this.formatGrammar(Nt(i,e)),s=[];return o.forEach(d=>{d.theme&&s.push(this.fb.control(d.theme,[g.required]))}),s}))}formatGrammar(t){for(let i of t)i.theme=Ct(i.theme);return t}static \u0275fac=function(i){return new(i||n)(Dt(V))};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})();function vi(n,c){if(n&1){let t=G();r(0,"mat-card")(1,"mat-card-header")(2,"mat-card-subtitle"),l(3),a(),r(4,"mat-card-title"),l(5),a()(),_(6,"mat-divider"),r(7,"mat-card-actions")(8,"button",8),u("click",function(){let e=f(t).$index,o=S();return h(o.updateTheme(e))}),r(9,"mat-icon"),l(10,"update"),a()(),r(11,"button",9),u("click",function(){let e=f(t).$index,o=S();return h(o.removeTheme(e))}),r(12,"mat-icon"),l(13,"delete"),a()()()()}if(n&2){let t=c.$implicit,i=c.$index,e=S();m(3),I("$",i+1,"."),m(2),I(" ",t==null?null:t.value," "),m(3),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(3),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay)}}function Mi(n,c){n&1&&_(0,"mat-spinner")}var $e=(()=>{class n{materialConfig;service;bottomSheet;fb;formGroup=Gt(new L({}));formArray=v(()=>this.formGroup().get("themes"));isFileLoading=y(!1);files=y([]);constructor(t,i,e,o){this.materialConfig=t,this.service=i,this.bottomSheet=e,this.fb=o}ngOnInit(){}onInputFileChange(t){let i=t.files;!i||!i.length||this.readFile(i)}addQuestion(){this.openBottomSheet().pipe(T(1),et(t=>!!t),it(t=>{this.formArray().push(t)})).subscribe()}updateTheme(t){let i=this.formArray().get(""+t),o={formControl:vt(i),mode:"update"};this.openBottomSheet(o).pipe(T(1),et(s=>!!s),it(s=>{this.updateFormControls(t,s)})).subscribe()}removeTheme(t){this.formArray().removeAt(t)}reset(){ht(this.formGroup())}openBottomSheet(t){return t||(t={formControl:this.fb.control("",g.required),mode:"add"}),this.bottomSheet.open(je,{data:t}).afterDismissed()}updateFormControls(t,i){this.formArray().setControl(t,vt(i))}readFile(t){let i=[],e=[];this.cleanFiles(),this.isFileLoading.set(!0);for(let o in t)if(t[o]instanceof File){if(Ft(t[o],this.files()))continue;this.files.update(d=>[...d,t[o]]),e.push(t[o].name),i.push(this.service.excelFormGroup(t[o]))}this.setFormArray(i),this.setFilesName(e)}setFormArray(t){wt(...t).pipe(T(1)).subscribe(i=>{let e=i.flat();console.log("next: ",e),e.forEach(o=>{this.formArray().push(o)}),this.isFileLoading.set(!1)})}setFilesName(t){let i=this.formGroup().get("fileName");i?.value?.trim()&&t.push(i.value),i?.patchValue(t.join(", "))}cleanFiles(){this.formArray().length||this.files.set([])}static \u0275fac=function(i){return new(i||n)(C(O),C(pe),C(qt),C(V))};static \u0275cmp=P({type:n,selectors:[["comp-file-writing"]],inputs:{formGroup:[xt.SignalBased,"formGroup"]},standalone:!0,features:[j([pe]),A],decls:31,vars:13,consts:[["f_input",""],[3,"formGroup"],["matTooltip","Upload grammar questions 'Excel' files","mat-icon-button","","matPrefix","",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","text","readonly","","matInput","","formControlName","fileName"],["type","file","multiple","","hidden","","accept",".xlsx",3,"change"],[1,"main-actions"],["matTooltip","Add new question","mat-mini-fab","","color","primary",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","reset","mat-raised-button","","color","accent","matTooltip","Reset Grammar form",3,"click","disabled","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["matTooltip","Update current theme","mat-icon-button","","color","warn","type","button",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["matTooltip","Remove current theme","mat-icon-button","","color","warn","type","button",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"]],template:function(i,e){if(i&1){let o=G();r(0,"form",1)(1,"mat-form-field")(2,"mat-label"),l(3,"Files Name"),a(),r(4,"button",2),u("click",function(){f(o);let d=F(9);return h(d.click())}),r(5,"mat-icon"),l(6,"upload_file"),a()(),_(7,"input",3),r(8,"input",4,0),u("change",function(){f(o);let d=F(9);return h(e.onInputFileChange(d))}),a(),r(10,"mat-error"),l(11,"this field is required"),a()(),r(12,"mat-card")(13,"mat-card-header")(14,"mat-card-title"),l(15,"Question List"),a(),r(16,"mat-card-subtitle"),l(17," Writing addeded added themes list: "),r(18,"b"),l(19),a(),l(20," question"),a()(),r(21,"mat-card-content"),D(22,vi,14,8,"mat-card",null,B),M(24,Mi,1,0,"mat-spinner"),a(),r(25,"mat-card-actions",5)(26,"button",6),u("click",function(){return f(o),h(e.addQuestion())}),r(27,"mat-icon"),l(28,"add"),a()(),r(29,"button",7),u("click",function(){return f(o),h(e.reset())}),l(30," Reset "),a()()()()}i&2&&(p("formGroup",e.formGroup()),m(4),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(15),b(e.formArray().controls.length),m(3),x(e.formArray().controls),m(2),w(24,e.isFileLoading()?24:-1),m(2),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(3),p("disabled",e.formGroup().untouched)("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay))},dependencies:[tt,Z,J,Y,X,Tt,N,Q,pt,st,W,ot,lt,nt,mt,at,rt,k,$,z,ct,U,K,dt,ut,ft,Rt,R,q,kt,At,Wt,$t],styles:["mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-spinner[_ngcontent-%COMP%]{margin-left:auto!important;margin-right:auto!important}.main-actions[_ngcontent-%COMP%]{justify-content:space-between}"]})}return n})();function We(n){return[{id:1,title:"Grammar",description:"Add grammar questions",component:Oe,inputs:{formGroup:n.get(H.GRAMMAR)}},{id:2,title:"Reading",description:"Add reading questions",component:Be,inputs:{formGroup:n.get(H.READING)}},{id:3,title:"Listening",description:"Add listening questions",component:He,inputs:{formGroup:n.get(H.LISTENING)}},{id:4,title:"Dictionary",description:"Add dictionary questions",component:qe,inputs:{formGroup:n.get(H.DICTIONARY)}},{id:5,title:"Writing",description:"Add writing questions",component:$e,inputs:{formGroup:n.get(H.WRITING)}}]}var Qe=(()=>{class n{constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})();var bi=(n,c)=>c.id;function wi(n,c){if(n&1&&(r(0,"div",3),_(1,"img",14),a()),n&2){let t=S();m(),p("src",t.coverUrl(),Jt)}}function Di(n,c){}function xi(n,c){n&1&&M(0,Di,0,0,"ng-template")}function Gi(n,c){if(n&1&&(r(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),l(3),a(),r(4,"mat-panel-description"),l(5),a()(),M(6,xi,1,0,null,15),a()),n&2){let t=c.$implicit;m(3),b(t.title),m(2),I(" ",t.description," "),m(),p("ngComponentOutlet",t.component)("ngComponentOutletInputs",t.inputs)}}var Ue=(()=>{class n{dialogData;materialConfig;Activities=y(H);formGroup=v(()=>this.dialogData.formGroup);formCoverFile=v(()=>this.formGroup().get("coverFile"));activitiesExpansion=v(()=>We(this.formGroup()));coverUrl=y("");tiles=[{text:"One",cols:3,rows:1,color:"lightblue"},{text:"Two",cols:1,rows:2,color:"lightgreen"},{text:"Three",cols:1,rows:1,color:"lightpink"},{text:"Four",cols:2,rows:1,color:"#DDBDF1"}];constructor(t,i){this.dialogData=t,this.materialConfig=i}ngOnInit(){}get coverFileName(){return this.formCoverFile()?.value?.name??""}onInputFileChange(t){let i=t.files;if(!i||!i.item(0))return;let e=i.item(0);this.formCoverFile().patchValue(e),this.coverUrl.set(Zt(this.formCoverFile().value))}onSubmit(){console.log(this.formGroup().value)}reset(){ht(this.formGroup())}static \u0275fac=function(i){return new(i||n)(C(Ce),C(O))};static \u0275cmp=P({type:n,selectors:[["comp-create-testing"]],standalone:!0,features:[j([Qe]),A],decls:36,vars:9,consts:[["f_input",""],["novalidate","",3,"ngSubmit","formGroup"],["mat-dialog-title",""],[1,"coverImage"],["matTooltip","Upload cover image for document","mat-icon-button","","matPrefix","",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],["type","text","readonly","","matInput","",3,"value"],["type","file","multiple","","hidden","","accept","image/*",3,"change"],["matPrefix",""],["matInput","","formControlName","label","placeholder","Write label of document"],["matInput","","formControlName","description","rows","10","placeholder","Write description of document"],[2,"color","transparent","user-select","none"],["align","end"],["mat-raised-button","","color","primary","type","submit",3,"mat-dialog-close","disabled"],["mat-raised-button","","color","warn","type","reset",3,"click","disabled"],["alt","",3,"src"],[4,"ngComponentOutlet","ngComponentOutletInputs"]],template:function(i,e){if(i&1){let o=G();r(0,"form",1),u("ngSubmit",function(){return f(o),h(e.onSubmit())}),r(1,"h2",2),l(2,"Testing Questions"),a(),r(3,"mat-dialog-content"),M(4,wi,2,1,"div",3),r(5,"mat-form-field")(6,"mat-label"),l(7,"Files Name"),a(),r(8,"button",4),u("click",function(){f(o);let d=F(13);return h(d.click())}),r(9,"mat-icon"),l(10,"add_photo_alternate"),a()(),_(11,"input",5),r(12,"input",6,0),u("change",function(){f(o);let d=F(13);return h(e.onInputFileChange(d))}),a(),r(14,"mat-error"),l(15,"this field is required"),a()(),r(16,"mat-form-field")(17,"mat-icon",7),l(18,"label"),a(),r(19,"mat-label"),l(20,"Label"),a(),_(21,"input",8),a(),r(22,"mat-form-field")(23,"mat-label"),l(24,"Description"),a(),_(25,"textarea",9),a(),r(26,"mat-accordion"),D(27,Gi,7,4,"mat-expansion-panel",null,bi),a(),r(29,"p",10),l(30," Lorem ipsum dolor, sit amet consectetur adipisicing elit. Totam, nemo. Laboriosam ipsa molestiae voluptatem quasi? Id reiciendis, ut repellat consequatur sapiente voluptatibus temporibus, modi ullam quas sit, amet est consequuntur. "),a()(),r(31,"mat-dialog-actions",11)(32,"button",12),l(33,"Submit"),a(),r(34,"button",13),u("click",function(){return f(o),h(e.reset())}),l(35,"Reset"),a()()()}i&2&&(p("formGroup",e.formGroup()),m(4),w(4,e.coverUrl()&&e.formCoverFile().value?4:-1),m(4),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(3),p("value",e.coverFileName),m(16),x(e.activitiesExpansion()),m(5),p("mat-dialog-close",e.formGroup())("disabled",e.formGroup().invalid),m(2),p("disabled",e.formGroup().untouched))},dependencies:[tt,Z,J,Y,X,Tt,N,Q,pt,W,Me,ye,Te,ve,Se,k,$,z,ct,U,K,dt,ut,ft,Ve,Ne,Ee,Pe,ke,Ae,fe,R,q],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.coverImage[_ngcontent-%COMP%]{position:relative;width:150px;height:150px;min-height:150px;margin:10px 0}.coverImage[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}"]})}return n})();var Ii=[{id:1,name:"Hydrogen"},{id:2,name:"Helium"},{id:3,name:"Lithium"},{id:4,name:"Beryllium"},{id:5,name:"Boron"},{id:6,name:"Carbon"},{id:7,name:"Nitrogen"},{id:8,name:"Oxygen"},{id:9,name:"Fluorine"},{id:10,name:"Neon"},{id:11,name:"Sodium"},{id:12,name:"Magnesium"},{id:13,name:"Aluminum"},{id:14,name:"Silicon"},{id:15,name:"Phosphorus"},{id:16,name:"Sulfur"},{id:17,name:"Chlorine"},{id:18,name:"Argon"},{id:19,name:"Potassium"},{id:20,name:"Calcium"}],Un=(()=>{class n{materialConfig;dialog;historyList=y(Ii);historyColumns=y(["id","name"]);Activities=y(H);formGroup=y(new L({coverFile:new E,label:new E("",[g.required]),description:new E(""),[H.GRAMMAR]:new L({fileName:new E(""),questionList:new It([],[g.required])}),[H.READING]:new L({readText:new It([],g.required),fileName:new E(""),questionList:new It([],[g.required])}),[H.LISTENING]:new L({audios:new It([],[g.required]),fileName:new E(""),questionList:new It([],[g.required])}),[H.DICTIONARY]:new L({fileName:new E(""),questionList:new It([],[g.required])}),[H.WRITING]:new L({fileName:new E(""),themes:new It([])})}));constructor(t,i){this.materialConfig=t,this.dialog=i}openDialog(){let t={formGroup:this.formGroup()};this.dialog.open(Ue,{data:t}).afterClosed().subscribe(e=>{console.log(`Dialog result: ${e}`)})}static \u0275fac=function(i){return new(i||n)(C(O),C(_e))};static \u0275cmp=P({type:n,selectors:[["app-testing"]],standalone:!0,features:[A],decls:9,vars:7,consts:[["cols","4","rowHeight","50px"],[3,"colspan","rowspan"],[1,"mat-h1"],["mat-mini-fab","","color","primary","matTooltip","Add new Document",3,"click","matTooltipPosition","matTooltipShowDelay","matTooltipHideDelay"],[3,"list","columns"]],template:function(i,e){i&1&&(r(0,"mat-grid-list",0)(1,"mat-grid-tile",1)(2,"h1",2),l(3,"Testing Documents"),a()(),r(4,"mat-grid-tile")(5,"button",3),u("click",function(){return e.openDialog()}),r(6,"mat-icon"),l(7,"add"),a()()()(),_(8,"comp-table",4)),i&2&&(m(),p("colspan",3)("rowspan",1),m(4),p("matTooltipPosition",e.materialConfig.tooltip.position)("matTooltipShowDelay",e.materialConfig.tooltip.showDelay)("matTooltipHideDelay",e.materialConfig.tooltip.hideDelay),m(3),p("list",e.historyList())("columns",e.historyColumns()))},dependencies:[De,k,$,we,be,Fe,N,st,R,q],styles:["[_nghost-%COMP%]{flex:0 0 100vw;overflow-x:hidden}@media screen and (min-width: 960px){[_nghost-%COMP%]{flex:1 1 auto}}"]})}return n})();export{Un as TestingComponent};
